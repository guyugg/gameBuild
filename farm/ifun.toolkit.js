!function(A,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NoSleep=e():A.NoSleep=e()}(this,function(){return function(n){function o(A){if(r[A])return r[A].exports;var e=r[A]={i:A,l:!1,exports:{}};return n[A].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var r={};return o.m=n,o.c=r,o.d=function(A,e,n){o.o(A,e)||Object.defineProperty(A,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(A){var e=A&&A.__esModule?function(){return A.default}:function(){return A};return o.d(e,"a",e),e},o.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},o.p="",o(o.s=0)}([function(A,e,n){"use strict";var o=function(){function o(A,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(A,o.key,o)}}return function(A,e,n){return e&&o(A.prototype,e),n&&o(A,n),A}}(),r=n(1),t="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,i=function(){function A(){(function(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")})(this,A),t?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(A){.5<this.noSleepVideo.currentTime&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return o(A,[{key:"enable",value:function(){t?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){t?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),A}();A.exports=i},function(A,e,n){"use strict";A.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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"}])}),function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},A="undefined"!=typeof module&&module.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var A,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=e.length,r={};n<o;n++)if((A=e[n])&&A[1]in t){for(n=0;n<A.length;n++)r[e[0][n]]=A[n];return r}return!1}(),r={change:o.fullscreenchange,error:o.fullscreenerror},e={request:function(A){var e=o.requestFullscreen;A=A||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?A[e]():A[e](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(A){this.isFullscreen?this.exit():this.request(A)},onchange:function(A){this.on("change",A)},onerror:function(A){this.on("error",A)},on:function(A,e){var n=r[A];n&&t.addEventListener(n,e,!1)},off:function(A,e){var n=r[A];n&&t.removeEventListener(n,e,!1)},raw:o};o?(Object.defineProperties(e,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),A?module.exports=e:window.screenfull=e):A?module.exports=!1:window.screenfull=!1}(),function(){"use strict";var Q="notify-orientation",p="notify-fullscreen",R="notify-scrollup",h="notify-scrollimg",m="notify-done",b=document,S=b.body,C=!1,O=function(){var i={OS_IOS:"iOS",OS_ANDROID:"Android",OS_WINDOWS:"Windows",OS_LINUX:"Linux",OS_BLACKBERRY:"Blackberry",OS_OSX:"OS X",OS_WP8:"WP8",OS_WINRT:"WINRT",OS_UNKNOWN:"Unknown",UNKNOWN:-1,LINUX:1,MACOS:2,ANDROID:3,IPHONE:4,IPAD:5,BLACKBERRY:6,WP8:11,MOBILE_BROWSER:100,DESKTOP_BROWSER:101,BROWSER_TYPE_WECHAT:"wechat",BROWSER_TYPE_WECHAT_GAME:"wechatgame",BROWSER_TYPE_WECHAT_GAME_SUB:"wechatgamesub",BROWSER_TYPE_ANDROID:"androidbrowser",BROWSER_TYPE_IE:"ie",BROWSER_TYPE_QQ_PLAY:"qqplay",BROWSER_TYPE_QQ:"qqbrowser",BROWSER_TYPE_MOBILE_QQ:"mqqbrowser",BROWSER_TYPE_UC:"ucbrowser",BROWSER_TYPE_UCBS:"ucbs",BROWSER_TYPE_360:"360browser",BROWSER_TYPE_BAIDU_APP:"baiduboxapp",BROWSER_TYPE_BAIDU:"baidubrowser",BROWSER_TYPE_MAXTHON:"maxthon",BROWSER_TYPE_OPERA:"opera",BROWSER_TYPE_OUPENG:"oupeng",BROWSER_TYPE_MIUI:"miuibrowser",BROWSER_TYPE_FIREFOX:"firefox",BROWSER_TYPE_SAFARI:"safari",BROWSER_TYPE_CHROME:"chrome",BROWSER_TYPE_IOS_CHROME:"ioschrome",BROWSER_TYPE_LIEBAO:"liebao",BROWSER_TYPE_QZONE:"qzone",BROWSER_TYPE_SOUGOU:"sogou",BROWSER_TYPE_UNKNOWN:"unknown"},A=window.navigator,c=A.userAgent.toLowerCase();i.isMobile=/mobile|android|iphone|ipad/.test(c),i.platform=i.isMobile?i.MOBILE_BROWSER:i.DESKTOP_BROWSER;var l=!1,s=!1,e="",n=0,o=/android (\d+(?:\.\d+)+)/i.exec(c)||/android (\d+(?:\.\d+)+)/i.exec(A.platform);o&&(l=!0,e=o[1]||"",n=parseInt(e)||0);(o=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(c))?(s=!0,e=o[2]||"",n=parseInt(e)||0):/(iPhone|iPad|iPod)/.exec(A.platform)&&(s=!0,e="",n=0);var a=i.OS_UNKNOWN;-1!==A.appVersion.indexOf("Win")?a=i.OS_WINDOWS:s?a=i.OS_IOS:-1!==A.appVersion.indexOf("Mac")?a=i.OS_OSX:l?a=i.OS_ANDROID:-1===A.appVersion.indexOf("Linux")&&-1===c.indexOf("ubuntu")&&-1===A.appVersion.indexOf("X11")||(a=i.OS_LINUX);i.os=a,i.osVersion=e,i.osMainVersion=n,i.browserType=i.BROWSER_TYPE_UNKNOWN,function(){var A=/mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(c);A||(A=/qqbrowser|ucbrowser/i.exec(c)),A||(A=/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(c));var e=A?A[0].toLowerCase():i.BROWSER_TYPE_UNKNOWN;if("micromessenger"===e?e=i.BROWSER_TYPE_WECHAT:"safari"===e&&l?e=i.BROWSER_TYPE_ANDROID:"qq"===e&&c.match(/android.*applewebkit/i)?e=i.BROWSER_TYPE_ANDROID:"trident"===e?e=i.BROWSER_TYPE_IE:"360 aphone"===e?e=i.BROWSER_TYPE_360:"mxbrowser"===e?e=i.BROWSER_TYPE_MAXTHON:"opr/"===e&&(e=i.BROWSER_TYPE_OPERA),a===i.OS_IOS&&/CriOS/i.test(c)&&(e=i.BROWSER_TYPE_IOS_CHROME),i.isMobile){var n=["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv|.0.0.0)"].join("|");i.isInApp=Boolean(c.match(new RegExp("("+n+")","ig")))}if(!0===s){var o=window.devicePixelRatio||1,r=window.screen.width*o,t=window.screen.height*o;1125==r&&2436==t?i.iphoneX=!0:828==r&&1792==t||750==r&&1624==t?i.iphoneXR=!0:1242==r&&2688==t&&(i.iphoneXMax=!0)}i.browserType=e}();var r=[i.BROWSER_TYPE_BAIDU,i.BROWSER_TYPE_WECHAT,i.BROWSER_TYPE_MOBILE_QQ];i.BROWSER_CAN_FULLSCREEN=r.indexOf(i.browserType)<0,i.browserVersion="",function(){var A=c.match(/(mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui)(mobile)?(browser)?\/?([\d.]+)/i);A||(A=c.match(/(qqbrowser|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i)),i.browserVersion=A?A[4]:""}();var t=window.innerWidth||document.documentElement.clientWidth,u=window.innerHeight||document.documentElement.clientHeight,E=window.devicePixelRatio||1;return i.windowPixelResolution={width:E*t,height:E*u},i}(),e={device:O.isMobile?"mobile":"desktop",browser_type:O.browserType,browser_ver:O.browserVersion,os:O.os,os_ver:O.osVersion,platform:O.platform},n="https:"===location.protocol,o={},r={};try{o=t(I("keydata").textContent),r=t(I("connect").textContent)}catch(A){console.warn("[ifun warning]",A)}function t(A){if("string"!=typeof A)return A;try{return JSON.parse(A)}catch(A){return console.error(A),null}}function I(A){return b.getElementById(A)}window.ifun={data:o,isSecure:n,sys:O,dump:e,setupMobile:function(A,e){if(C)return console.log("already init"),void(e&&e(!1));if(C=!0,!O.isMobile)return console.log("[ifun]desktop mode"),void(e&&e(!1));var n=window.istarApp||O.isInApp||!1;if(A.noSleep&&!n)try{if(O.os===O.OS_IOS||O.browserType===O.BROWSER_TYPE_UC||O.browserType===O.BROWSER_TYPE_360)throw new Error("noSleep reject");var o=new NoSleep;S.addEventListener("touchend",function(){o.enable()})}catch(A){console.log(A)}var r=A.orientation;r=r&&"number"==typeof r?r:0;var t=function(A,e){var n=b.createElement("div");n.id=A,0<r&&(n.className=1==r?"landscape":"portrait"),n.innerHTML=e||"",S.appendChild(n)},i=function(A){A.preventDefault()};if(t(Q,""),n)return console.log("[ifun] In-App mode, ignore fullscreen or scrollup"),void(e&&e(!1));if(screenfull.enabled&&O.BROWSER_CAN_FULLSCREEN){t(p,"");var c=""!==A.canvasId?I(A.canvasId):b.getElementsByTagName("canvas")[0],l=I(Q),s=I(p);if(0<r){var a="(orientation: "+(1==r?"landscape":"portrait")+")";window.matchMedia(a).addListener(function(A){A.matches?(s.style.display="",screenfull.request(c)):(s.style.display="none",screenfull.exit())})}return l.addEventListener("touchstart",i),l.addEventListener("touchmove",i),l.addEventListener("touchend",i),s.addEventListener("touchstart",i),s.addEventListener("touchmove",i),s.addEventListener("touchend",function(){screenfull.isFullscreen||screenfull.request(c)}),screenfull.on("change",function(){s.style.display=screenfull.isFullscreen?"none":""}),console.log("[ifun]use FullScreen"),void(e&&e(!0))}if(O.os!==O.OS_IOS)return console.log("[ifun]cannot use FullScreen, BrowserType: "+O.browserType),void(e&&e(!1));var u=O.browserType===O.BROWSER_TYPE_SAFARI,E=O.browserType===O.BROWSER_TYPE_IOS_CHROME;if(!0===A.iosOnlySafari&&!u)return console.log("[ifun] onlySafari is enabled, BrowserType: "+O.browserType),void(e&&e(!1));if(!u&&!E)return console.log("[ifun] doesn`t support ios scrollup in BrowserType: "+O.browserType),void(e&&e(!1));t(h,""),t(R,"");var B=I(R),d=I(h),w=function(A){setTimeout(function(){A?(B.classList.remove(m),d.classList.remove(m),S.removeEventListener("touchmove",i,{passive:!1})):(B.classList.add(m),d.classList.add(m),S.addEventListener("touchmove",i,{passive:!1}))},0)},f=50;O.iphoneX?f=100:O.iphoneXR?f=100:O.iphoneXMax&&(f=100);var g=function(){1==r?window.innerWidth>window.innerHeight&&(40<Math.abs(screen.width-window.innerHeight)?w(!0):w(!1)):2==r&&(Math.abs(screen.height-window.innerHeight)>f?w(!0):w(!1))};return g(),window.addEventListener("resize",g),console.log("[ifun]use Scrollup"),void(e&&e(!0))},setupConnector:function(){if("string"==typeof r.url)try{var A=new WebSocket((n?"wss":"ws")+"://"+r.url);A.binaryType="arraybuffer",A.onopen=function(){A.send(function(A){var e="";try{e=function(A){try{return JSON.stringify(A)}catch(A){return console.error(A),""}}(A)}catch(A){console.error(A)}for(var n=e.length,o=new ArrayBuffer(2*n),r=new Uint16Array(o),t=0;t<n;t++)r[t]=e.charCodeAt(t);return o}([100,{key:o.usid||o.skey||"",gid:o.gid||0,currency:o.currency||"",dump:e}]))},A.onmessage=function(A){A.data instanceof ArrayBuffer?console.log(function(A){try{return t(String.fromCharCode.apply(null,new Uint16Array(A)))}catch(A){return console.error(A),null}}(A.data)):console.warn("[connector] message invalid")},A.onclose=function(){console.warn("[connector] closed")},A.onerror=function(){console.warn("[connector] errored")}}catch(A){console.warn("[ifun warning]",A)}else console.warn("[connector] connectData.url is not set")},setBackgroundImg:function(A){if(O.isMobile)console.log("[ifun] mobile device cannot add background image");else{var e=b.createElement("div");e.classList.add("background-img"),e.style.backgroundImage="url("+(A||"./background.jpg")+")",S.appendChild(e)}},notifys:{rotation:Q,fullscreen:p,scrollup:R,scrollimg:h,doneClass:m}}}();