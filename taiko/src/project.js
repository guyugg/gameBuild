__require=function t(e,o,i){function n(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({AudioBox:[function(t,e,o){"use strict";cc._RF.push(e,"0952afAaQxBtoIwP5w8dDd1","AudioBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,r=(i.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"music_switch",{get:function(){return e._music_switch},set:function(t){e._music_switch=t,e.do_vol(e.music_id,e.music_vol,e._music_switch)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sound_switch",{get:function(){return e._sound_switch},set:function(t){e._sound_switch=t;for(var o=0,i=e.sound_ids.length;o<i;o++)e.do_vol(e.sound_ids[o][0],e.sound_ids[o][1],e._sound_switch)},enumerable:!0,configurable:!0}),t.do_vol=function(t,e,o){e=o?e:0,cc.audioEngine.setVolume(t,e)},t.play_music=function(t,o,i,n){void 0===i&&(i=""),void 0===n&&(n=1),e.music_id>=0&&cc.audioEngine.stop(e.music_id),t&&""!==t&&i&&""!==i?(e.music_id=cc.audioEngine.play(t,!1,e._music_switch?o:0),e.music_vol=o,cc.audioEngine.setFinishCallback(e.music_id,function(){e.play_music(i,n)})):(e.music_id=cc.audioEngine.play(t,!0,e._music_switch?o:0),e.music_vol=o)},t.play_sound=function(t,o,i){return void 0===i&&(i=!1),e._play_sound(t,o,i)},t._play_sound=function(t,o,i){if(e._sound_switch){var n=cc.audioEngine.play(t,i,e._sound_switch?o:0);return e.sound_ids.push([n,o]),cc.audioEngine.setFinishCallback(n,function(){for(var t=0;t<e.sound_ids.length;t++)if(e.sound_ids[t][0]===n){e.sound_ids.splice(t,1);break}}),n}return-1},t.stop_sound=function(t){cc.audioEngine.stop(t)},t._music_switch=!0,t._sound_switch=!0,t.music_id=-1,t.music_vol=1,t.sound_ids=[],t=e=__decorate([n],t)}());o.AudioBox=r,cc._RF.pop()},{}],Eyecatch:[function(t,e,o){"use strict";cc._RF.push(e,"e64bei5EeRBk4Y9YL6i/kZc","Eyecatch"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/function"),n=t("../../Script/lib/AudioBox"),r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.freeSound=null,e.bonusSound=null,e.archerySound=null,e.freeMusic=null,e.bonusMusic=null,e.archeryMusic=null,e.freeEyecatch=null,e.bonusEyecatch=null,e.archeryEyecatch=null,e.freeTime=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.freeEyecatch.parent.active=!1,this.bonusEyecatch.parent.active=!1,this.archeryEyecatch.parent.active=!1},e.prototype.freeTransform=function(){var t=this;return new Promise(function(e,o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.AudioBox.play_sound(this.freeSound,1),[4,this.trans(this.freeEyecatch)];case 1:return t.sent(),n.AudioBox.play_music(this.freeMusic,1),e(),[2]}})})})},e.prototype.bonusTransform=function(){var t=this;return new Promise(function(e,o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.AudioBox.play_sound(this.bonusSound,1),[4,this.trans(this.bonusEyecatch)];case 1:return t.sent(),n.AudioBox.play_music(this.bonusMusic,1),e(),[2]}})})})},e.prototype.archeryTransform=function(){var t=this;return new Promise(function(e,o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.AudioBox.play_sound(this.archerySound,1),[4,this.trans(this.archeryEyecatch)];case 1:return t.sent(),n.AudioBox.play_music(this.archeryMusic,1),e(),[2]}})})})},e.prototype.trans=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(r){switch(r.label){case 0:return t.parent.active=!0,e=n.AudioBox.music_switch,(o=t.getComponent(cc.Animation)).play(),n.AudioBox.music_switch=!1,[4,i.aniFinish(o)];case 1:return r.sent(),n.AudioBox.music_switch=e,t.parent.active=!1,[2]}})})},__decorate([c({type:cc.AudioClip})],e.prototype,"freeSound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"bonusSound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"archerySound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"freeMusic",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"bonusMusic",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"archeryMusic",void 0),__decorate([c(cc.Node)],e.prototype,"freeEyecatch",void 0),__decorate([c(cc.Node)],e.prototype,"bonusEyecatch",void 0),__decorate([c(cc.Node)],e.prototype,"archeryEyecatch",void 0),__decorate([c({tooltip:"\u5e7e\u79d2\u5f8c\u80cc\u5f8c\u8f49\u5834"})],e.prototype,"freeTime",void 0),e=__decorate([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function"}],Symbol:[function(t,e,o){"use strict";cc._RF.push(e,"c04c7+VtSlIGJodDqjbayAH","Symbol"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=t("../../Script/config"),r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.symbolNode=null,e.miCircleNode=null,e.touch=null,e.staticSprites=[],e.blurSprites=[],e.clips=[],e.sprite=null,e.animation=null,e.id=null,e.exclude=[9,10,11],e}return __extends(e,t),e.prototype.init=function(){var t=this;this.miCircleNode.opacity=0,this.sprite=this.symbolNode.getComponent(cc.Sprite),this.animation=this.symbolNode.getComponent(cc.Animation),this.touch.on(cc.Node.EventType.TOUCH_START,function(){return t.activeInfo()},this);for(var e=0,o=this.clips.length;e<o;e++)this.animation.addClip(this.clips[e],""+e)},e.prototype.setColor=function(t){this.symbolNode.color=t?n.graySymbol.color:n.normalSymbol.color,this.symbolNode.opacity=t?n.graySymbol.opacity:n.normalSymbol.opacity},e.prototype.setSprite=function(t,e){var o=e?this.blurSprites:this.staticSprites;this.sprite.spriteFrame=o[t],this.id=t},e.prototype.playAnimation=function(){return this.animation.play(""+this.id),this.animation.currentClip.duration},e.prototype.stopAnimation=function(){this.animation.stop(),this.sprite.spriteFrame=this.staticSprites[this.id]},e.prototype.miEffect=function(t){t?(this.symbolNode.runAction(cc.sequence(cc.scaleTo(.4,1.1,1.1),cc.scaleTo(.4,1,1)).repeatForever()),this.miCircleNode.getComponent(cc.Animation).play()):(this.symbolNode.stopAllActions(),this.symbolNode.scale=1,this.miCircleNode.getComponent(cc.Animation).stop(),this.miCircleNode.opacity=0)},e.prototype.activeInfo=function(){if(-1===this.exclude.indexOf(this.id)){var t=this.node.x>0?-120:120,e=this.node.x+t,o=this.node.y-227,n={idx:this.id,x:e,y:o},r=new cc.Event.EventCustom(i.info,!0);r.detail=n,this.node.dispatchEvent(r)}},__decorate([c({type:cc.Node})],e.prototype,"symbolNode",void 0),__decorate([c({type:cc.Node})],e.prototype,"miCircleNode",void 0),__decorate([c({type:cc.Node})],e.prototype,"touch",void 0),__decorate([c({type:[cc.SpriteFrame]})],e.prototype,"staticSprites",void 0),__decorate([c({type:[cc.SpriteFrame]})],e.prototype,"blurSprites",void 0),__decorate([c({type:[cc.AnimationClip]})],e.prototype,"clips",void 0),e=__decorate([s],e)}(cc.Component);o.default=a,function(t){t.info="info"}(i=o.symbolEvent||(o.symbolEvent={})),cc._RF.pop()},{"../../Script/config":"config"}],archery:[function(t,e,o){"use strict";cc._RF.push(e,"61c08f2fg9CspvWje367K5q","archery"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./game_master"),n=t("./model"),r=t("../Components/Win/win"),s=t("./loading"),c=t("./lib/function"),a=t("./lib/AudioBox"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinSound=null,e.standByBow=null,e.btn=null,e.btnWord=null,e.lave=null,e.result=null,e.winLabel=null,e.winNode=null,e.countdownAni=null,e.gameMaster=null,e.model=null,e.win=null,e.canClick=!0,e.touchEvent=cc.Node.EventType.TOUCH_START,e.laveNum=4,e._countdownNum=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.gameMaster=cc.find("GameMaster").getComponent(i.default),this.model=this.gameMaster.model,this.win=this.winNode.getComponent(r.default),this.model.node.on(n.modelEvent.ac,function(e){return t.archeryResult(e.detail)},this),this.btn.on(this.touchEvent,function(){return t.clickCheck()},this),this.standByBow.getComponent(cc.Animation).play(),this.result.getComponent(cc.Animation).play("arrowbonus_resume"),this.setLave(),this.countdownNum=10},Object.defineProperty(e.prototype,"countdownNum",{get:function(){return this._countdownNum},set:function(t){var e=this;this._countdownNum=t,10===t?(this.countdownAni.play().speed=1,this.schedule(function(){return e.countdownNum--},1)):5===t?(this.btn.getComponent(cc.Animation).play().speed=2,this.btnWord.getComponent(cc.Animation).play().speed=2,this.countdownAni.play().speed=2):0===t&&(this.countdownAni.play().stop(),this.unscheduleAllCallbacks(),this.clickCheck())},enumerable:!0,configurable:!0}),e.prototype.setLave=function(){this.laveNum--,this.lave.string="*"+this.laveNum},e.prototype.clickCheck=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.canClick?(a.AudioBox.play_sound(this.spinSound,1),this.canClick=!1,(t=this.btnWord.getComponent(cc.Animation)).play("bg_ui_spindown"),[4,c.aniFinish(t)]):[3,2];case 1:e.sent(),this.model.archerySpin(),this.countdownNum=0,e.label=2;case 2:return[2]}})})},e.prototype.archeryResult=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,n,r;return __generator(this,function(c){switch(c.label){case 0:return e=t.result_archery,o=e.results[0],i=o.hit,n=o.round_win||0,r=e.is_end,this.setLave(),this.standByBow.getComponent(cc.Animation).stop(),[4,this.showResult(i,n)];case 1:return c.sent(),this.canClick=!r,this.btn.active=!r,r?(this.winLabel.node.parent.opacity=0,[4,this.win.showWin(e.archery_win,this.model.totalBet,!0)]):[3,3];case 2:return c.sent(),this.model.balance=t.now_balance,this.gameMaster.loading.showTransLoading(),this.gameMaster.loading.loading(s.scene.main),[3,4];case 3:this.countdownNum=10,this.btnWord.getComponent(cc.Animation).play().speed=1,this.btn.getComponent(cc.Animation).play().speed=1,this.standByBow.getComponent(cc.Animation).play(),this.result.getComponent(cc.Animation).play("arrowbonus_resume"),c.label=4;case 4:return[2]}})})},e.prototype.showResult=function(t,e){var o=this;return new Promise(function(i,n){return __awaiter(o,void 0,void 0,function(){var o,n;return __generator(this,function(r){switch(r.label){case 0:return o=t?"arrowbonus_goal":"arrowbonus_miss",n=this.result.getComponent(cc.Animation),this.winLabel.string=""+c.strip(e),n.play(o),[4,c.aniFinish(n)];case 1:return r.sent(),i(),[2]}})})})},__decorate([d({type:cc.AudioClip})],e.prototype,"spinSound",void 0),__decorate([d({type:cc.Node})],e.prototype,"standByBow",void 0),__decorate([d({type:cc.Node})],e.prototype,"btn",void 0),__decorate([d({type:cc.Node})],e.prototype,"btnWord",void 0),__decorate([d({type:cc.Label})],e.prototype,"lave",void 0),__decorate([d({type:cc.Node})],e.prototype,"result",void 0),__decorate([d({type:cc.Label})],e.prototype,"winLabel",void 0),__decorate([d({type:cc.Node})],e.prototype,"winNode",void 0),__decorate([d({type:cc.Animation})],e.prototype,"countdownAni",void 0),e=__decorate([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Components/Win/win":"win","./game_master":"game_master","./lib/AudioBox":"AudioBox","./lib/function":"function","./loading":"loading","./model":"model"}],background:[function(t,e,o){"use strict";cc._RF.push(e,"554c6G4uspME68q4yO5GKhU","background"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/function"),n=t("../../Script/loading"),r=t("../../Script/lib/AudioBox"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.miStartSound=null,e.miEndSound=null,e.gameClearSound=null,e.gameClearLoopSound=null,e.marrySound=null,e.normal=null,e.free=null,e.end=null,e.freeWife=null,e.freeSpring=null,e.freeLave=null,e.freeAnimate=null,e.weddingNode=null,e.multiCricle=null,e.multiNode=null,e.multiNum=null,e.fireNode=null,e.mission=null,e.missionLabel=null,e.emotions=[],e.blockTouch=!1,e.missionText=[],e.missionIdx=0,e.clickCount=0,e.stopMulti=!1,e.buffer=0,e}return __extends(e,t),e.prototype.init=function(t){for(var e=this,o=t.player,i=t.wife,r=t.class,s=this.fireNode.children,c=0,a=s.length;c<a;c++)s[c].active=!1;this.multiNode.opacity=i?255:150,this.multiNum.node.active=!!i,this.freeWife.children.map(function(t){return t.active=i}),this.multiCricle.node.active=!!i,this.resumeMulti(),this.weddingNode.active=!1,this.mission.active=!0,this.end.parent.active=!1,this.mission.getComponent(cc.Animation).play("mission_standby"),this.mission.on(cc.Node.EventType.TOUCH_START,function(){return e.normalMission()},this);var l=o.wife_level,u=o.levels;this.missionText[0]=this.textTrans(n.FontAsset.text.missionText.wedding,l,null);for(c=1,a=u.length;c<a;c++)this.missionText[c]=this.textTrans(n.FontAsset.text.missionText.levelUp,u[c],u[c-1]);this.missionText[u.length]=n.FontAsset.text.missionText.max,this.missionIdx=!1===i?0:r+1,this.missionLabel.string=this.missionText[this.missionIdx],this.transform(0),this.normalMission(),this.node.on("reset",function(){return t.reset()},this),this.freeWife.on(cc.Node.EventType.TOUCH_START,function(){return e.checkEmotion()}),this.emotions.map(function(t){return t.scale=0})},e.prototype.checkEmotion=function(){this.clickCount++,this.clickCount%5==0&&(this.emotions.map(function(t){return t.scale=0}),this.emotions[i.random(0,this.emotions.length-1)].getComponent(cc.Animation).play(),this.clickCount=0)},e.prototype.gameOver=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,n=this;return __generator(this,function(s){switch(s.label){case 0:return r.AudioBox.play_music(null,1),t=r.AudioBox.play_sound(this.gameClearSound,1),e=null,cc.audioEngine.setFinishCallback(t,function(){return e=r.AudioBox.play_sound(n.gameClearLoopSound,1,!0)}),this.end.parent.active=!0,(o=this.end.getComponent(cc.Animation)).play(),[4,i.aniFinish(o)];case 1:return s.sent(),o.play("gameclear_loop"),this.end.parent.getChildByName("touch").once(cc.Node.EventType.TOUCH_START,function(){r.AudioBox.stop_sound(e),n.node.emit("reset"),n.end.parent.active=!1},this),[2]}})})},e.prototype.textTrans=function(t,e,o){for(var r=n.FontAsset.text.ability,s=n.FontAsset.text.money,c="",a=0,l=e.length;a<l;a++){var u=e[a],d=o&&u===o[a];if(0!==u&&!d){if(c+=r[a],0===a){i.transMoney(u).map(function(t,e){return c+=0!==t?""+(t+s[e]):""})}else{var p=i.transAbility(u);c+="Lv"+p[0]}c+=a===l-1?"":"\u3001"}}return t.split("<condition>").join(c)},e.prototype.transform=function(t){if(this.normal.active=0===t,this.free.active=1===t,1===t){this.emotions.map(function(t){return t.scale=0}),this.freeSpring.getComponent(cc.Animation).play(),this.freeWife.getComponent(cc.Animation).play(),this.multiCricle.play();for(var e=this.fireNode.children,o=function(t,o){var i=e[t].getComponent(cc.Animation);e[t].active=!0,i.play("mult_fire_start"),i.once("finished",function(){return i.play("mult_fire")},n)},n=this,r=0;r<10;r++)o(r)}else this.multiNum.node.opacity=150,i.stopWithFirst(this.multiCricle)},e.prototype.setLave=function(t){this.freeLave.string=""+t,this.freeAnimate.getComponent(cc.Animation).play();var e=Number(t);if(10!==e){var o=this.fireNode.children[e].getComponent(cc.Animation);o.play("mult_fire_close"),o.once("finished",function(){return o.node.active=!1},this)}},e.prototype.resumeMulti=function(){this.multiNum.string="*1"},e.prototype.popMulti=function(){this.multiNum.node.runAction(cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,1,1)))},e.prototype.randomMulti=function(t,e,o,i){var n=this;if(t){r.AudioBox.play_sound(this.miStartSound,1);var s=0,c=this.multiNum.node;this.stopMulti=!1,c.opacity=255,this.schedule(function(){s=(s+=1)===e.length?0:s;var t=e[s];n.multiNum.string="*"+t,n.stopMulti&&t===o&&(r.AudioBox.play_sound(n.miEndSound,1),n.unscheduleAllCallbacks(),n.multiNum.string="*"+o,c.opacity=i?255:150,i&&n.popMulti())},.05)}},e.prototype.wedding=function(){var t=this;return new Promise(function(e,o){r.AudioBox.play_sound(t.marrySound,1);var i=t.weddingNode,n=i.getComponent(cc.Animation);t.multiNode.opacity=255,t.multiNum.node.active=!0,t.multiCricle.node.active=!0,t.freeWife.children.map(function(t){return t.active=!0}),i.active=!0,n.play(),n.once("finished",function(){i.active=!1,e()},t)})},e.prototype.normalMission=function(){this.blockTouch||(this.buffer++,this.missionOpen(!1))},e.prototype.clearMission=function(){this.buffer++,this.missionOpen(!0)},e.prototype.missionOpen=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,n;return __generator(this,function(r){switch(r.label){case 0:return this.blockTouch&&0!==this.buffer?[2]:(this.blockTouch=!0,e=t?"mission_clear_open":"mission_open",o=t?1:3,n=this.mission.getComponent(cc.Animation),t?(n.play("mission_clear"),[4,i.aniFinish(n)]):[3,2]);case 1:r.sent(),r.label=2;case 2:return n.play(e).wrapMode=cc.WrapMode.Normal,[4,i.aniFinish(n)];case 3:return r.sent(),[4,i.timeout(o)];case 4:return r.sent(),n.play(e).wrapMode=cc.WrapMode.Reverse,[4,i.aniFinish(n)];case 5:return r.sent(),this.mission.getComponent(cc.Animation).play("mission_standby"),this.buffer--,this.blockTouch=!1,t&&(this.missionIdx++,this.missionLabel.string=this.missionText[this.missionIdx],this.normalMission()),this.buffer>0&&this.missionOpen(!0),[2]}})})},__decorate([a({type:cc.AudioClip})],e.prototype,"miStartSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"miEndSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"gameClearSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"gameClearLoopSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"marrySound",void 0),__decorate([a({type:cc.Node})],e.prototype,"normal",void 0),__decorate([a({type:cc.Node})],e.prototype,"free",void 0),__decorate([a({type:cc.Node})],e.prototype,"end",void 0),__decorate([a({type:cc.Node})],e.prototype,"freeWife",void 0),__decorate([a({type:cc.Node})],e.prototype,"freeSpring",void 0),__decorate([a({type:cc.Label})],e.prototype,"freeLave",void 0),__decorate([a({type:cc.Node})],e.prototype,"freeAnimate",void 0),__decorate([a({type:cc.Node})],e.prototype,"weddingNode",void 0),__decorate([a({type:cc.Animation})],e.prototype,"multiCricle",void 0),__decorate([a({type:cc.Node})],e.prototype,"multiNode",void 0),__decorate([a({type:cc.Label})],e.prototype,"multiNum",void 0),__decorate([a({type:cc.Node})],e.prototype,"fireNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"mission",void 0),__decorate([a({type:cc.Label})],e.prototype,"missionLabel",void 0),__decorate([a({type:[cc.Node]})],e.prototype,"emotions",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function","../../Script/loading":"loading"}],bonus:[function(t,e,o){"use strict";cc._RF.push(e,"23891HUTGxKILe6ErmZ4Ho1","bonus"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./game_master"),n=t("./model"),r=t("./lib/function"),s=t("./loading"),c=t("../Components/Win/win"),a=t("./translator"),l=t("./lib/AudioBox"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinSound=null,e.fightSound=null,e.lightSound=null,e.winSound=null,e.loseSound=null,e.resultWinSound=null,e.resultLoseSound=null,e.castleLabel=[],e.castle=[],e.darkCastle=[],e.touch=[],e.victory=null,e.defeat=null,e.totalWin=null,e.btn=null,e.btnWord=null,e.bg=null,e.bgSpin=null,e.countdownAni=null,e.gameMaster=null,e.model=null,e.win=null,e.targetIdx=0,e.canClick=!0,e.touchEvent=cc.Node.EventType.TOUCH_START,e._countdownNum=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.gameMaster=cc.find("GameMaster").getComponent(i.default),this.node.getComponent(a.default).init(),this.win=this.totalWin.getComponent(c.default),this.model=this.gameMaster.model,this.model.node.on(n.modelEvent.bg,function(e){return t.castleResult(e.detail)},this),this.showTip(),this.fightEffect(!1),this.btn.on(this.touchEvent,function(){return t.clickCheck()},this),this.touch[this.targetIdx].once(this.touchEvent,function(){return t.clickCheck()},this);for(var e=0,o=this.darkCastle.length;e<o;e++)this.castle[e].getChildByName("win").active=!1,this.castle[e].getChildByName("win").getChildByName("line_bg").active=!1,this.darkCastle[e].active=!1;var l=s.FontAsset.text.castle.slice(0);for(e=0,o=l.length;e<o;e++){var u=r.random(0,o-1),d=l[e];l[e]=l[u],l[u]=d}for(e=0,o=this.castleLabel.length;e<o;e++)this.castleLabel[e].string=l[e]},Object.defineProperty(e.prototype,"countdownNum",{get:function(){return this._countdownNum},set:function(t){var e=this;this._countdownNum=t,10===t?(this.countdownAni.play().speed=1,this.schedule(function(){return e.countdownNum--},1)):5===t?(this.btnWord.getComponent(cc.Animation).play().speed=2,this.countdownAni.play().speed=2):0===t&&(this.countdownAni.play().stop(),this.unscheduleAllCallbacks(),this.clickCheck())},enumerable:!0,configurable:!0}),e.prototype.fightEffect=function(t){this.bg.active=!t,this.bgSpin.active=t},e.prototype.clickCheck=function(){if(this.canClick){l.AudioBox.play_sound(this.spinSound,1);var t=this.btnWord.getComponent(cc.Animation);t.play("bg_ui_spindown"),t.once("finished",function(){return t.play().speed=1},this),this.canClick=!1,this.model.bgSpin(),this.countdownNum=0}},e.prototype.castleResult=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,n,r=this;return __generator(this,function(c){switch(c.label){case 0:return e=t.result_bonus,o=e.results[0],i=o.hit,n=o.round_win,this.touch[this.targetIdx].targetOff(this),[4,this.showResult(i,n)];case 1:return c.sent(),this.targetIdx+=1,this.canClick=!e.is_end,this.showTip(),e.is_end?[4,this.win.showWin(e.bonus_win,this.model.totalBet,!0)]:[3,3];case 2:return c.sent(),this.model.balance=t.now_balance,this.gameMaster.loading.showTransLoading(),this.gameMaster.loading.loading(s.scene.main),[3,4];case 3:this.touch[this.targetIdx].once(this.touchEvent,function(){return r.clickCheck()},this),c.label=4;case 4:return[2]}})})},e.prototype.showResult=function(t,e){var o=this;return new Promise(function(i,n){return __awaiter(o,void 0,void 0,function(){var o,n,s,c,a,u,d,p,h,m,y;return __generator(this,function(f){switch(f.label){case 0:return o=this.castle[this.targetIdx],n=o.getChildByName("win"),s=o.getChildByName("fail"),c=n.getChildByName("line_bg"),a=c.getChildByName("set_nbA").getComponent(cc.Label),u=t?this.victory:this.defeat,d=t?n:s,p=u.getComponent(cc.Animation),this.fightEffect(!0),this.btn.active=!1,this.castle[this.targetIdx].getChildByName("tip").active=!1,u.active=!0,h=l.AudioBox.play_sound(this.fightSound,1),m=t?this.winSound:this.loseSound,cc.audioEngine.setFinishCallback(h,function(){return l.AudioBox.play_sound(m,1)}),p.play(),[4,r.aniFinish(p)];case 1:return f.sent(),y=t?this.resultWinSound:this.resultLoseSound,l.AudioBox.play_sound(y,1),this.fightEffect(!1),d.active=!0,d.getComponent(cc.Animation).play(),t?(a.string=r.strip(e),c.active=!0,[4,this.win.showWin(e,this.model.totalBet,!1)]):[3,3];case 2:f.sent(),f.label=3;case 3:return u.active=!1,this.darkCastle[this.targetIdx].active=!t,i(),[2]}})})})},e.prototype.showTip=function(){if(!(this.targetIdx>=3)){this.btn.active=!0,this.countdownNum=10;for(var t=0,e=this.castle.length;t<e;t++){var o=this.castle[t].getChildByName("tip");o.active=t===this.targetIdx,o.getComponent(cc.Animation).play()}}},__decorate([p({type:cc.AudioClip})],e.prototype,"spinSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"fightSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"lightSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"winSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"loseSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"resultWinSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"resultLoseSound",void 0),__decorate([p({type:[cc.Label]})],e.prototype,"castleLabel",void 0),__decorate([p({type:[cc.Node]})],e.prototype,"castle",void 0),__decorate([p({type:[cc.Node]})],e.prototype,"darkCastle",void 0),__decorate([p({type:[cc.Node]})],e.prototype,"touch",void 0),__decorate([p({type:cc.Node})],e.prototype,"victory",void 0),__decorate([p({type:cc.Node})],e.prototype,"defeat",void 0),__decorate([p({type:cc.Node})],e.prototype,"totalWin",void 0),__decorate([p({type:cc.Node})],e.prototype,"btn",void 0),__decorate([p({type:cc.Node})],e.prototype,"btnWord",void 0),__decorate([p({type:cc.Node})],e.prototype,"bg",void 0),__decorate([p({type:cc.Node})],e.prototype,"bgSpin",void 0),__decorate([p({type:cc.Animation})],e.prototype,"countdownAni",void 0),e=__decorate([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Components/Win/win":"win","./game_master":"game_master","./lib/AudioBox":"AudioBox","./lib/function":"function","./loading":"loading","./model":"model","./translator":"translator"}],button:[function(t,e,o){"use strict";cc._RF.push(e,"be8c7Gt1GlBl54MnFqgufua","button"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=t("../../Script/lib/function"),r=t("../../Script/lib/AudioBox"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextSound=null,e.backSound=null,e.superLabelNode=null,e.superTurbo=null,e.spin=null,e.spinBtn=null,e.spinSprite=null,e.spinturboSprite=null,e.stopSprite=null,e.stopTurboSprite=null,e.backSprite=null,e.stop=null,e.autoStop=null,e.plus=null,e.close=null,e.auto=null,e.turbo=null,e.info=null,e.plusBar=null,e.betAdd=null,e.betSub=null,e.maxBet=null,e.autoTimesLabel=null,e.autoBarTimesLabel=null,e.shineEffect=null,e.spinEffect=null,e.laveBtn=null,e.laveLabel=null,e.bounce=null,e.model=null,e.canClick=!0,e.isFree=!1,e.isSpinBlock=!1,e.super=!1,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.superLabelNode.active=!1;var o=cc.Node.EventType.TOUCH_START,n=cc.Node.EventType.TOUCH_END,r=cc.Node.EventType.TOUCH_CANCEL;this.model=t,this.activePlusBar(!1),this.stop.active=!1,this.spinBtn.getComponent(cc.Sprite).spriteFrame=this.spinSprite;var s=this.superTurbo;s.on(o,function(){return e.checkClick(function(){return e.spinStart()})}),s.on(n,function(){return e.disableSuper()}),s.on(r,function(){return e.disableSuper()}),s._touchListener.setSwallowTouches(!1),this.spin.on(n,function(){return e.checkClick(function(){return e.spinEmit()})}),this.stop.on(o,function(){return e.checkClick(function(){return e.node.emit(i.stop)},e.backSound)}),this.auto.on(o,function(){return e.checkClick(function(){return e.node.emit(i.auto)},e.nextSound)}),this.autoStop.on(o,function(){return e.checkClick(function(){return e.setAuto(!1)},e.backSound)}),this.turbo.on(o,function(){return e.checkClick(function(){return e.setTurbo()},e.nextSound)}),this.plus.on(o,function(){return e.checkClick(function(){return e.activePlusBar(!0)},e.nextSound)}),this.close.on(o,function(){return e.checkClick(function(){return e.activePlusBar(!1)},e.backSound)}),this.betAdd.on(o,function(){return e.checkSpinBlock(function(){return e.node.emit(i.betAdd)},e.betAdd,e.nextSound)}),this.betSub.on(o,function(){return e.checkSpinBlock(function(){return e.node.emit(i.betSub)},e.betSub,e.backSound)}),this.maxBet.on(o,function(){return e.checkSpinBlock(function(){return e.node.emit(i.maxBet)},e.maxBet,e.nextSound)}),this.info.on(o,function(){return e.checkSpinBlock(function(){return e.node.emit(i.info)},e.info)}),this.plusBar.getChildByName("block").on(o,function(){})},e.prototype.activePlusBar=function(t){this.plusBar.active=t,this.plus.active=!t},e.prototype.disableSuper=function(){this.super=!1,this.superLabelNode.active=!1},e.prototype.spinStart=function(){var t=this;this.spinEffect.getComponent(cc.Animation).play(),this.bounce.getComponent(cc.Animation).play(),this.unscheduleAllCallbacks(),this.super=!0,this.scheduleOnce(function(){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return this.super&&(this.node.emit(i.spin,!0),this.superLabelNode.active=!0),[2]})})},1)},e.prototype.spinEmit=function(){this.canClick=!1,this.super=!1,this.node.emit(i.spin)},e.prototype.shineSpin=function(){this.shineEffect.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal},e.prototype.freeLave=function(t){this.spinBtn.active=!t,this.laveBtn.active=t},e.prototype.setLave=function(t){this.laveLabel.string=t},e.prototype.setAutoTimes=function(t){this.autoTimesLabel.string=t,this.autoBarTimesLabel.string=t},e.prototype.hideAll=function(t){t&&this.disableSuper();var e=!t&&this.model.isTurbo,o=!t&&this.model.isAuto;this.isFree=t,this.setShineEffect(e),this.backSprite.opacity=t?100:255,this.autoStop.active=o},e.prototype.setBtn=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isFree||(this.canClick=e,this.spin.parent.active=t,this.spinBtn.active=t&&e,this.stop.active=!t,this.backSprite.opacity=t&&e?255:100,this.stop.opacity=e?255:100)},e.prototype.spinBlock=function(t){this.isSpinBlock=!t,this.info.active=t,this.betAdd.opacity=t?255:50,this.betSub.opacity=t?255:50,this.maxBet.opacity=t?255:50},e.prototype.setTurbo=function(t){void 0===t&&(t=!1);var e=t?this.model.isTurbo:!this.model.isTurbo;this.model.isTurbo=e,this.activePlusBar(!1),this.setShineEffect(e),this.spinBtn.getComponent(cc.Sprite).spriteFrame=e?this.spinturboSprite:this.spinSprite,this.stop.getComponent(cc.Sprite).spriteFrame=e?this.stopTurboSprite:this.stopSprite,this.autoStop.getComponent(cc.Sprite).spriteFrame=e?this.stopTurboSprite:this.stopSprite,this.autoTimesLabel.node.color=e?cc.color(255,255,255):cc.color(0,0,0)},e.prototype.setShineEffect=function(t){var e=this.shineEffect.getComponent(cc.Animation);t?e.play().wrapMode=cc.WrapMode.Loop:n.stopWithFirst(e)},e.prototype.setAuto=function(t){void 0===t&&(t=!0),this.model.isAuto=t,this.stop.active=!t,this.autoStop.active=t,t||this.model.resumeAuto()},e.prototype.checkClick=function(t,e){this.isFree||this.canClick&&(r.AudioBox.play_sound(e,1),this.activePlusBar(!1),t())},e.prototype.checkSpinBlock=function(t,e,o){this.isSpinBlock||(r.AudioBox.play_sound(o,1),e.getComponent(cc.Animation).play(),t())},__decorate([a({type:cc.AudioClip})],e.prototype,"nextSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"backSound",void 0),__decorate([a({type:cc.Node})],e.prototype,"superLabelNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"superTurbo",void 0),__decorate([a({type:cc.Node})],e.prototype,"spin",void 0),__decorate([a({type:cc.Node})],e.prototype,"spinBtn",void 0),__decorate([a({type:cc.SpriteFrame})],e.prototype,"spinSprite",void 0),__decorate([a({type:cc.SpriteFrame})],e.prototype,"spinturboSprite",void 0),__decorate([a({type:cc.SpriteFrame})],e.prototype,"stopSprite",void 0),__decorate([a({type:cc.SpriteFrame})],e.prototype,"stopTurboSprite",void 0),__decorate([a({type:cc.Node})],e.prototype,"backSprite",void 0),__decorate([a({type:cc.Node})],e.prototype,"stop",void 0),__decorate([a({type:cc.Node})],e.prototype,"autoStop",void 0),__decorate([a({type:cc.Node})],e.prototype,"plus",void 0),__decorate([a({type:cc.Node})],e.prototype,"close",void 0),__decorate([a({type:cc.Node})],e.prototype,"auto",void 0),__decorate([a({type:cc.Node})],e.prototype,"turbo",void 0),__decorate([a({type:cc.Node})],e.prototype,"info",void 0),__decorate([a({type:cc.Node})],e.prototype,"plusBar",void 0),__decorate([a({type:cc.Node})],e.prototype,"betAdd",void 0),__decorate([a({type:cc.Node})],e.prototype,"betSub",void 0),__decorate([a({type:cc.Node})],e.prototype,"maxBet",void 0),__decorate([a({type:cc.Label})],e.prototype,"autoTimesLabel",void 0),__decorate([a({type:cc.Label})],e.prototype,"autoBarTimesLabel",void 0),__decorate([a({type:cc.Node})],e.prototype,"shineEffect",void 0),__decorate([a({type:cc.Node})],e.prototype,"spinEffect",void 0),__decorate([a({type:cc.Node})],e.prototype,"laveBtn",void 0),__decorate([a({type:cc.Label})],e.prototype,"laveLabel",void 0),__decorate([a({type:cc.Node})],e.prototype,"bounce",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,function(t){t.spin="spin",t.stop="stop",t.auto="auto",t.betAdd="betAdd",t.betSub="betSub",t.maxBet="maxBet",t.info="info"}(i=o.buttonEnum||(o.buttonEnum={})),cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"3bb07AOh35MZJrJAe/Nu8nV","config"),Object.defineProperty(o,"__esModule",{value:!0}),o.urlConfig=JSON.parse(window.keyData||"{}"),o.isDebug=!0,o.normalConfig={normalAcc:2,normalMax:60,normalTurns:[5,6,7,8,9]},o.turboConfig={turboAcc:3,turboMax:80,turboTurns:[3,4,5,6,7]},o.normalSymbol={color:cc.color(255,255,255),opacity:255},o.graySymbol={color:cc.color(80,80,80),opacity:150},o.normalRoll=[[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,3,4,5,6,7,8,9,11],[0,1,2,3,4,5,6,7,8,9,11]],o.freeRoll=[[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],o.autoTimes=[50,100,500,1e3],o.winLevel=[10,50,100,1/0],cc._RF.pop()},{}],debug:[function(t,e,o){"use strict";cc._RF.push(e,"da4b41skItIZ57AJx24pBPw","debug"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ws"),n=[100,0,{player:{username:"Guest",balance:1e4,currency:"TWD",wintable:[[0,5,50,500,1e3],[0,0,20,200,500],[0,0,20,200,500],[0,0,10,50,200],[0,0,10,50,100],[0,0,10,30,100],[0,0,10,20,80],[0,0,5,20,80],[0,0,5,10,80]],levels:[[0,0,0,0,0],[0,1e3,500,0,1500],[3e3,3e3,1500,500,3e3],[5e3,5e3,3500,3e3,5e3],[1e4,8e3,8e3,8e3,8e3]],wife_level:[0,0,100,0,100],wife_buffs:[2,3,4,5],bet_steps:[.1,.3,.6,.9,1.2,1.5,1.8,2.1,2.5,3,3.5,4,5,7.5,10,15,30],archery_years:[1558,1562,1566,1570,1574,1578,1582,1586,1590,1594,1598]}}],r=[210,0,{career:{days:0,wife:!0,class:0,abilities:[0,25,25,25,25],progress:[1557,3,0]}}],s=[[312,0,{game:{now_balance:9998},career:{class:0,abilities:[0,75,75,75,75],wife:!0,days:1,progress:[1557,1,1]}}],[312,0,{game:{now_balance:9998},career:{class:1,abilities:[0,75,75,75,75],wife:!0,days:1,progress:[1557,1,1]}}],[312,0,{game:{now_balance:9998},career:{class:1,abilities:[0,75,75,75,75],wife:!0,days:1,progress:[1558,1,1]}}],[312,0,{game:{now_balance:9998},career:{class:1,abilities:[0,75,75,75,75],wife:!0,days:1,progress:[1558,2,1]}}],[312,0,{game:{now_balance:9998},career:{class:1,abilities:[0,75,75,75,75],wife:!0,days:1,progress:[1558,3,1]}}],[312,0,{game:{now_balance:9998},career:{class:1,abilities:[100,75,25,25,25],wife:!0,days:1,progress:[1559,4,1],archery:!0}}],[312,0,{game:{now_balance:9998},career:{class:4,abilities:[0,100,100,100,100],wife:!0,days:1,progress:[1559,4,1]}}]],c=[[310,0,{game:{mode:"free",now_balance:10004,result:{roll:[0,1,10,0,5,10,1,0,10,2,2,8,11,3,5],awards:[],normal_win:0},extras:{free_rounds:10,free_multi:5}}}],[310,0,{game:{mode:"bonus",now_balance:9998,result:{roll:[3,1,10,4,5,8,11,6,4,3,11,8,11,3,5],awards:[],normal_win:0},extras:{}}}],[310,0,{game:{mode:"normal",now_balance:9998,result:{roll:[3,1,10,4,5,8,1,6,4,3,2,8,3,3,5],awards:[],normal_win:0},extras:{}}}],[310,0,{game:{mode:"normal",now_balance:9998,result:{roll:[3,1,10,4,5,8,1,6,4,3,2,8,3,3,5],awards:[],normal_win:0},extras:{}}}],[310,0,{game:{mode:"normal",now_balance:9998,result:{roll:[3,1,10,4,5,8,1,6,4,3,2,8,3,3,5],awards:[],normal_win:0},extras:{}}}],[310,0,{game:{mode:"normal",now_balance:9998,result:{roll:[3,1,10,4,5,8,1,6,4,3,2,8,3,3,5],awards:[],normal_win:0},extras:{}}}],[310,0,{game:{mode:"normal",now_balance:9998,result:{roll:[3,1,10,4,5,8,1,6,4,3,2,8,3,3,5],awards:[],normal_win:0},extras:{}}}]],a=[[320,0,{game:{mode:"free",now_balance:10004,result_free:{is_end:!1,results:[{round_win:0,roll:[5,8,1,2,3,6,2,8,4,3,4,6,8,3,6],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10004,result_free:{is_end:!1,results:[{round_win:0,roll:[3,6,5,5,4,0,3,4,5,7,6,2,6,8,7],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10008,result_free:{is_end:!1,results:[{round_win:4,roll:[6,1,5,1,4,5,6,1,7,3,8,5,7,6,8],awards:[{symbol:1,pay:20,grid:[1,3,7],line:10,multi:1,win:2},{symbol:1,pay:20,grid:[1,3,7],line:14,multi:1,win:2}]}]}}}],[320,0,{game:{mode:"free",now_balance:10008,result_free:{is_end:!1,results:[{round_win:0,roll:[3,8,5,8,6,0,6,1,7,9,4,6,3,8,5],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10008,result_free:{is_end:!1,results:[{round_win:0,roll:[4,6,2,0,3,7,0,0,7,5,0,3,4,8,5],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10010,result_free:{is_end:!1,results:[{round_win:2,roll:[6,2,3,0,3,7,9,3,8,1,4,7,8,3,4],awards:[{symbol:3,pay:10,grid:[2,4,6],line:3,multi:1,win:1},{symbol:3,pay:10,grid:[2,4,7],line:7,multi:1,win:1}]}]}}}],[320,0,{game:{mode:"free",now_balance:10010,result_free:{is_end:!1,results:[{round_win:0,roll:[7,3,6,5,4,0,0,0,0,3,8,9,7,6,8],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10034,result_free:{is_end:!1,results:[{round_win:24,roll:[4,1,3,4,1,3,8,9,3,4,1,5,7,6,8],awards:[{symbol:1,pay:200,grid:[1,4,7,10],line:0,multi:1,win:20},{symbol:3,pay:10,grid:[2,5,8],line:1,multi:1,win:1},{symbol:3,pay:10,grid:[2,5,7],line:15,multi:1,win:1},{symbol:4,pay:10,grid:[0,3,7],line:16,multi:1,win:1},{symbol:3,pay:10,grid:[2,5,8],line:17,multi:1,win:1}]}]}}}],[320,0,{game:{mode:"free",now_balance:10034,result_free:{is_end:!1,results:[{round_win:0,roll:[2,4,5,5,2,8,1,3,8,3,7,2,3,5,8],awards:[]}]}}}],[320,0,{game:{mode:"free",now_balance:10039,result_free:{is_end:!0,results:[{round_win:5,roll:[2,3,4,8,1,3,8,1,3,4,6,3,7,6,8],awards:[{symbol:3,pay:50,grid:[1,5,8,11],line:5,multi:1,win:5}]}],free_win:35}}}]],l=[[330,0,{game:{mode:"bonus",now_balance:9998,result_bonus:{is_end:!1,results:[{hit:0}]}}}],[330,0,{game:{mode:"bonus",now_balance:9998,result_bonus:{is_end:!1,results:[{hit:1,pay:10,round_win:20}]}}}],[330,0,{game:{mode:"bonus",now_balance:10018,result_bonus:{is_end:!0,results:[{hit:1,pay:10,round_win:20}],bonus_win:1e3}}}]],u=[[332,0,{game_ac:{mode:"archery",now_balance:9998,result_archery:{is_end:!1,results:[{hit:0}]}}}],[332,0,{game_ac:{mode:"archery",now_balance:9998,result_archery:{is_end:!1,results:[{hit:1,pay:10,round_win:20}]}}}],[332,0,{game_ac:{mode:"archery",now_balance:10018,result_archery:{is_end:!0,results:[{hit:1,pay:10,round_win:20}],archery_win:1e3}}}]],d=[[987,0,{other:{new_bd_money:1}}],[987,0,{other:{new_bd_money:2}}],[987,0,{other:{new_bd_money:3}}],[987,0,{other:{new_bd_money:4}}],[987,0,{other:{new_bd_money:5}}]],p=[220,0,{career:{days:0,wife:!1,class:0,abilities:[0,0,0,0,0],progress:[1555,4,0]}}],h=cc._decorator,m=h.ccclass,y=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.preIdx=0,e.ngIdx=0,e.fgIdx=0,e.bgIdx=0,e.acIdx=0,e.dropIdx=0,e}return __extends(e,t),e.prototype.init=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(n)),this.emit(i.WSEvent.onmessage,JSON.stringify(r))},e.prototype.ng=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(s[this.preIdx])),this.emit(i.WSEvent.onmessage,JSON.stringify(c[this.ngIdx])),6===this.ngIdx&&this.emit(i.WSEvent.onmessage,JSON.stringify(p)),this.ngIdx++,this.ngIdx=this.ngIdx>=c.length?0:this.ngIdx,this.preIdx++,this.preIdx=this.preIdx>=s.length?0:this.preIdx},e.prototype.fg=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(a[this.fgIdx])),this.fgIdx++,this.fgIdx=this.fgIdx>=a.length?0:this.fgIdx},e.prototype.bg=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(l[this.bgIdx])),this.bgIdx++,this.bgIdx=this.bgIdx>=l.length?0:this.bgIdx},e.prototype.ac=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(u[this.acIdx])),this.acIdx++,this.acIdx=this.acIdx>=u.length?0:this.acIdx},e.prototype.dropMoney=function(){this.emit(i.WSEvent.onmessage,JSON.stringify(d[this.dropIdx])),this.dropIdx++,this.dropIdx=this.dropIdx>=d.length?0:this.dropIdx},e=__decorate([m],e)}(cc.EventTarget));o.Debug=y,cc._RF.pop()},{"./ws":"ws"}],fakeData:[function(t,e,o){"use strict";cc._RF.push(e,"28952HtFsVHh6z1qmHtZF6q","fakeData"),Object.defineProperty(o,"__esModule",{value:!0}),o.fake=[[5,1,0,4,3,6,4,10,7,8,6,11,0,6,7],[6,1,7,5,6,2,8,1,7,7,6,2,6,4,8],[4,6,3,6,3,8,5,8,7,8,11,6,7,8,6],[0,8,7,6,5,4,5,6,8,7,6,8,8,5,6],[1,7,8,10,3,6,7,1,4,5,7,3,5,4,6],[10,7,8,8,0,5,2,5,3,3,8,5,4,7,6],[8,3,7,4,5,6,1,7,0,2,4,6,7,5,1],[3,8,5,8,3,4,5,6,10,7,8,3,5,6,11],[0,4,8,6,4,1,3,8,5,7,3,8,8,6,2],[6,10,7,4,6,3,1,7,0,1,8,6,8,5,4],[0,4,8,5,8,10,5,3,4,3,4,9,8,7,5],[0,8,7,4,5,6,8,5,7,1,5,3,6,4,5],[1,8,7,6,7,1,6,5,8,4,5,0,6,11,8],[5,8,3,8,3,5,1,5,6,5,7,6,2,7,5],[5,3,1,2,8,3,6,2,5,4,11,1,8,11,5],[0,6,8,4,2,8,5,7,6,5,6,1,2,7,5],[3,8,5,0,1,9,0,1,4,8,3,6,7,11,8],[4,8,7,8,2,3,2,5,10,6,8,3,4,7,5],[4,8,3,7,5,10,6,10,1,7,3,8,4,5,7],[8,10,5,4,6,3,4,5,6,8,2,4,7,8,6],[3,1,8,6,2,8,7,3,6,6,1,5,6,7,5],[7,5,8,2,5,0,7,3,2,2,5,7,2,7,5],[5,4,1,0,6,4,5,7,3,0,8,7,3,6,7],[0,3,4,7,3,4,6,8,1,1,6,3,4,2,8],[5,10,7,6,7,3,10,1,5,7,8,3,8,6,2],[4,0,7,2,8,4,2,8,5,6,1,5,7,11,8],[7,5,0,1,4,6,2,5,10,9,7,8,6,5,4],[7,5,8,10,8,2,6,2,5,3,7,8,8,6,2],[2,3,5,3,6,8,4,6,5,6,11,5,7,3,6],[2,1,7,5,0,6,6,8,1,11,8,6,8,6,7],[1,8,7,5,6,2,3,5,2,0,7,4,8,5,4],[3,5,4,7,8,3,6,3,7,8,3,4,5,7,1],[8,5,4,10,6,5,10,3,7,5,0,8,3,6,7],[6,0,8,4,8,5,6,4,11,6,7,8,7,6,4],[6,5,8,8,3,0,7,6,2,4,7,6,8,7,3],[8,7,6,3,5,8,5,7,11,7,3,8,8,4,6],[2,5,7,4,5,6,2,8,7,7,6,2,8,6,7],[7,8,5,5,6,2,7,3,6,4,7,6,6,4,8],[0,7,8,8,1,2,7,2,5,7,8,3,4,6,7],[8,7,0,10,8,4,5,7,3,4,7,0,6,4,7],[1,7,0,6,2,8,8,4,6,7,4,8,7,5,11],[7,0,6,8,4,3,0,1,4,1,7,8,2,8,5],[7,4,8,3,8,10,1,2,6,8,11,6,8,6,7],[5,8,3,3,5,8,6,10,1,6,3,7,5,2,11],[5,8,3,8,5,6,10,7,6,4,7,6,7,6,4],[4,8,10,2,6,5,6,5,7,8,7,1,7,5,6],[8,7,4,10,6,5,6,5,11,6,3,7,4,7,6],[7,0,6,8,10,6,5,7,11,8,6,5,6,4,8],[1,8,5,10,8,2,2,5,6,4,9,7,6,7,5],[7,4,8,7,5,10,4,6,11,4,8,2,5,4,8]],cc._RF.pop()},{}],function:[function(t,e,o){"use strict";cc._RF.push(e,"8770cqbVXBFkJtcM0X7xIcN","function"),Object.defineProperty(o,"__esModule",{value:!0});var i=2;o.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},o.strip=function(t){var e=Math.pow(10,i);return(t=Math.round(t*e)/e).toFixed(i)},o.mul=function(t,e){return Number((t*e).toFixed(5))},o.stopWithFirst=function(t){t.setCurrentTime(0),t.stop()},o.aniFinish=function(t){return new Promise(function(e,o){t.once("finished",function(){return e()})})},o.timeout=function(t){return new Promise(function(e,o){setTimeout(function(){return e()},1e3*t)})},o.transMoney=function(t){return[Math.floor(t/1e4),Math.floor(t%1e4/100),Math.floor(t%1e4%100)]},o.transAbility=function(t){var e=t%100/100,o=Math.floor(t/100);return e=o>98?.99:e,[o=o>98?99:o+1,e]},cc._RF.pop()},{}],game_master:[function(t,e,o){"use strict";cc._RF.push(e,"3d17etXvWZDeYB9Pzt0lS7L","game_master"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./model"),n=t("../Components/Modal/modal"),r=t("./loading"),s=t("../Components/Touch/touch"),c=t("./config"),a=t("./lib/AudioBox"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.demo=null,e.modalPrefab=null,e.touchPrefab=null,e.loading=null,e.model=null,e.modal=null,e.touch=null,e.initNum=0,e.initNumMax=2,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;r.FontAsset.load(c.urlConfig.lang,function(){cc.game.pause=function(){return cc.game.setFrameRate(59)},cc.game.resume=function(){return cc.game.setFrameRate(60)},cc.game.addPersistRootNode(t.node),t.modal=cc.instantiate(t.modalPrefab).getComponent(n.default),t.touch=cc.instantiate(t.touchPrefab).getComponent(s.default),t.model=t.node.getComponent(i.default),t.loading=t.node.getComponent(r.default),t.modal.init(),t.model.node.once(i.modelEvent.totalBet,function(){return t.checkWsReady()}),t.model.node.once(i.modelEvent.career,function(){return t.checkWsReady()}),t.model.init(),t.loading.init(),t.node.addChild(t.modal.node),t.node.addChild(t.touch.node),t.demo.active=c.urlConfig.demo})},e.prototype.checkWsReady=function(){var t=this;this.initNum+=1,this.initNum===this.initNumMax&&this.modal.normalModal(r.FontAsset.text.musicMsg,function(){return t.musicCheck(!0)},function(){return t.musicCheck(!1)})},e.prototype.musicCheck=function(t){a.AudioBox.music_switch=t,a.AudioBox.sound_switch=t,this.node.emit("ok"),this.loading.loading(r.scene.main)},__decorate([d(cc.Node)],e.prototype,"demo",void 0),__decorate([d({type:cc.Prefab})],e.prototype,"modalPrefab",void 0),__decorate([d({type:cc.Prefab})],e.prototype,"touchPrefab",void 0),e=__decorate([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Components/Modal/modal":"modal","../Components/Touch/touch":"touch","./config":"config","./lib/AudioBox":"AudioBox","./loading":"loading","./model":"model"}],info:[function(t,e,o){"use strict";cc._RF.push(e,"d480dvaGjRHsZM1dgDeu/5X","info"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.infoNode=null,e.closeNode=null,e.payoutLabels=[],e.wintable=null,e.canShow=!0,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.infoNode.active=!1,this.wintable=t,this.closeNode.on(cc.Node.EventType.TOUCH_START,function(){return e.close()},this)},e.prototype.show=function(t){if(this.canShow)if(this.infoNode.x!==t.x||this.infoNode.y!==t.y||!0!==this.infoNode.active){this.infoNode.active=!0,this.infoNode.x=t.x,this.infoNode.y=t.y;for(var e=this.wintable[t.idx],o=1,i=e.length;o<i;o++)0!==e[o]?(this.payoutLabels[o].node.parent.active=!0,this.payoutLabels[o].string=""+e[o]):this.payoutLabels[o].node.parent.active=!1}else this.close()},e.prototype.close=function(){this.infoNode.active=!1},__decorate([r({type:cc.Node})],e.prototype,"infoNode",void 0),__decorate([r({type:cc.Node})],e.prototype,"closeNode",void 0),__decorate([r({type:[cc.Label]})],e.prototype,"payoutLabels",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"6d4ba5sEtdIe7/ElCl7PZaR","loading"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.transLoading=null,e}return __extends(e,t),e.prototype.init=function(){var t=this;cc.loader.onProgress=function(e,o,i){t.progressBar&&(t.progressBar.progress=1-e/o)},this.progressBar.node.active=!0,this.transLoading.active=!1,this.progressBar.progress=1,this.preLoading(i.main)},e.prototype.reloadMain=function(){var t=this;this.transLoading.active=!0,cc.director.loadScene(i.main,function(){return t.closeLoading()})},e.prototype.showTransLoading=function(){this.transLoading.active=!0},e.prototype.preLoading=function(t){cc.director.preloadScene(t)},e.prototype.loading=function(t){var e=this;cc.director.getScene().name!==t?cc.director.loadScene(t,function(){return e.closeLoading()}):this.closeLoading()},e.prototype.closeLoading=function(){this.transLoading.active=!1,this.progressBar.node.active=!1},__decorate([s({type:cc.ProgressBar})],e.prototype,"progressBar",void 0),__decorate([s({type:cc.Node})],e.prototype,"transLoading",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,function(t){t.loading="loading",t.main="main",t.bonus="bonus",t.archery="archery"}(i=o.scene||(o.scene={}));var a=function(){function t(){}return t.load=function(e,o){void 0===e&&(e="zh-tw"),t.isAllSet()?o():(cc.loader.loadResDir(e+"/font",function(e,i){t.font=i,t.isAllSet()&&o()}),cc.loader.loadResDir(e+"/text",function(e,i){t.text=i[0].json,t.isAllSet()&&o()}))},t.isAllSet=function(){return!!t.font&&!!t.text},t.setFont=function(e){t.font&&(e.font=t.font[0])},t.setText=function(e,o){t.text&&(e.string=t.text[o])},t}();o.FontAsset=a,cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"f204c040r9NEKw3w8xCdUso","main"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./game_master"),n=t("./model"),r=t("../Components/Slot/slot"),s=t("../Components/Background/map"),c=t("../Components/UI/button"),a=t("../Components/UI/word"),l=t("../Components/Background/people"),u=t("../Components/Win/win"),d=t("./lib/function"),p=t("./loading"),h=t("../Components/Background/background"),m=t("../Components/Eyecatch/Eyecatch"),y=t("../Components/Setting/setting"),f=t("./translator"),_=t("../Components/UI/info"),g=t("../Components/Symbol/Symbol"),v=t("./lib/AudioBox"),b=cc._decorator,S=b.ccclass,w=b.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicNG=null,e.gameMasterPrefab=null,e.gameMaster=null,e.model=null,e.background=null,e.slot=null,e.map=null,e.people=null,e.word=null,e.button=null,e.win=null,e.info=null,e.eyecatch=null,e.setting=null,e.canSpin=!0,e.nowMode="normal",e.winNum=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this,e=cc.find("GameMaster");e?(this.gameMaster=e.getComponent(i.default),this.initAll()):(e=cc.instantiate(this.gameMasterPrefab),this.node.parent.addChild(e),this.gameMaster=e.getComponent(i.default),e.once("ok",function(){return t.initAll()}))},e.prototype.initAll=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o=this;return __generator(this,function(i){return t=this.node.getChildByName("Background"),e=this.node.getChildByName("UI"),this.model=this.gameMaster.model,this.background=t.getComponent(h.default),this.map=t.getComponent(s.default),this.people=t.getComponent(l.default),this.word=e.getComponent(a.default),this.button=e.getComponent(c.default),this.info=e.getComponent(_.default),this.slot=this.node.getChildByName("slot").getComponent(r.default),this.win=this.node.getChildByName("Win").getComponent(u.default),this.eyecatch=this.node.getChildByName("Eyecatch").getComponent(m.default),this.setting=this.node.getChildByName("Setting").getComponent(y.default),this.node.getComponent(f.default).init(),this.slot.init(),this.buttonInit(),this.modelInit(),this.word.init(),this.people.init(this.model),this.setting.init(this.model),this.background.init(this.model),this.info.init(this.model.player.wintable),this.node.on(g.symbolEvent.info,function(t){return o.info.show(t.detail)}),this.button.setTurbo(!0),this.model.autoTimes=this.model.autoTimes,this.setAbility(!0),this.endRound(),v.AudioBox.play_music(this.musicNG,1),[2]})})},e.prototype.modelInit=function(){var t=this,e=this.model.node;e.on(n.modelEvent.roll,function(){return t.slot.roll(t.model.isTurbo)},this),e.on(n.modelEvent.career,function(e){return t.careerFlow(e.detail)},this),e.on(n.modelEvent.ng,function(e){return t.normalSpin(e.detail)},this),e.on(n.modelEvent.fg,function(e){return t.freeSpin(e.detail)},this),e.on(n.modelEvent.balance,function(){return t.word.setText(a.wordEnum.balance,d.strip(t.model.balance))},this),e.on(n.modelEvent.totalBet,function(){return t.word.setText(a.wordEnum.totalBet,d.strip(t.model.totalBet))},this),e.on(n.modelEvent.resumeBtn,function(){return t.resumeBtn()},this),e.on(n.modelEvent.setAuto,function(e){return t.button.setAutoTimes(e.detail)},this),e.on(n.modelEvent.setLave,function(e){return t.setLave(e.detail)},this),e.on(n.modelEvent.updMoney,function(e){return t.word.drop(e.detail)},this),e.on(n.modelEvent.gameover,function(){return t.gameOver()},this),this.model.initMain()},e.prototype.gameOver=function(){this.button.spinBlock(!1),this.button.hideAll(!0),this.background.gameOver()},e.prototype.setLave=function(t){this.button.setLave(t),this.background.setLave(t)},e.prototype.resumeBtn=function(){this.button.spinBlock(!0),this.button.setAuto(!1),this.button.setBtn(!0,!0),this.canSpin=!0},e.prototype.careerFlow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(o){switch(o.label){case 0:return(e=t.career)?t.isWedding?[4,this.background.wedding()]:[3,2]:[2];case 1:o.sent(),this.background.clearMission(),o.label=2;case 2:return t.isUpgrade&&(this.people.playLvUpSound(),this.background.clearMission()),e.archery||(this.map.progress(e.progress,this.model.archeryYear),this.word.setTime(e,t.isInit)),this.people.change(e.class,e.wife),this.word.setClass(e.class),[2]}})})},e.prototype.setAbility=function(t){var e=this.model.career,o=this.model.nextCareer,i=[],n=[];i[0]=o.abilities[0]-e.abilities[0];for(var r=1,s=e.abilities.length;r<s;r++)i[r]=Math.floor(o.abilities[r])-Math.floor(e.abilities[r]),n[r-1]=d.transAbility(o.abilities[r])[0]-d.transAbility(e.abilities[r])[0];this.word.setAbility(o,i,n,t)},e.prototype.buttonInit=function(){var t=this,e=this.button.node;this.button.init(this.model),e.on(c.buttonEnum.spin,function(e){return t.preSpin(e.detail)},this),e.on(c.buttonEnum.auto,function(){return t.autoSpin()},this),e.on(c.buttonEnum.stop,function(){return t.stop()},this),e.on(c.buttonEnum.betAdd,function(){return t.changeBet(1)},this),e.on(c.buttonEnum.betSub,function(){return t.changeBet(-1)},this),e.on(c.buttonEnum.maxBet,function(){return t.changeBet(0)},this),e.on(c.buttonEnum.info,function(){return t.setting.open()},this)},e.prototype.changeBet=function(t){var e=this.model.player.bet_steps,o=0===t?e.length-1:this.model.bet+t;o<=-1||o>=e.length||(this.model.bet=o,this.word.setText(a.wordEnum.totalBet,d.strip(this.model.totalBet)),this.slot.clearLine())},e.prototype.autoSpin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return 0===this.model.autoTimes?(this.model.resumeAuto(),this.resumeBtn(),[2]):(this.button.setAuto(!0),this.button.setBtn(!1,!1),[4,d.timeout(.2)]);case 1:return t.sent(),this.model.autoTimes--,this.preSpin(),[2]}})})},e.prototype.preSpin=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.canSpin?(this.info.close(),this.info.canShow=!1,this.model.career=this.model.nextCareer,this.word.setText(a.wordEnum.win,d.strip(0)),this.canSpin=!1,this.button.setBtn(!1,!1),this.button.spinBlock(!1),this.model.ngSpin(),t?[4,d.timeout(.5)]:[3,2]):[2];case 1:e.sent(),this.stop(),e.label=2;case 2:return[2]}})})},e.prototype.normalSpin=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,n,r,s,c=this;return __generator(this,function(l){switch(l.label){case 0:return e=t.mode,o=t.result,i="normal"===this.nowMode&&"bonus"===e,n="normal"===this.nowMode&&"free"===e,this.winNum=o.normal_win,this.background.resumeMulti(),o.roll.filter(function(t){return 10===t}).length>=2&&(r=this.model.player.wife_buffs,s=n?t.extras.free_multi:r[d.random(0,r.length-1)],this.slot.node.once("miStart",function(){return c.background.randomMulti(c.model.nextCareer.wife,r,s,n)}),this.slot.node.once("miEnd",function(){return c.background.stopMulti=!0})),[4,this.spin(o,this.winNum,!1)];case 1:return l.sent(),this.model.balance=this.model.player.balance+this.winNum,i?(this.button.hideAll(!0),[4,this.slot.showSpecialLine(o,e)]):[3,4];case 2:return l.sent(),[4,this.eyecatch.bonusTransform()];case 3:return l.sent(),this.gameMaster.loading.showTransLoading(),this.gameMaster.loading.loading(p.scene.bonus),this.nowMode=e,[2];case 4:return n?(this.button.hideAll(!0),[4,this.slot.showSpecialLine(o,e)]):[3,7];case 5:return l.sent(),[4,this.eyecatch.freeTransform()];case 6:return l.sent(),this.model.lave=t.extras.free_rounds,this.button.freeLave(!0),this.background.transform(1),this.nowMode=e,this.winNum=0,this.word.setText(a.wordEnum.win,d.strip(0)),this.model.fgSpin(),[2];case 7:return this.endRound(function(){!c.model.isAuto&&!c.button.super&&o.awards.length>0&&c.slot.loopSingleLine(o)}),[2]}})})},e.prototype.freeSpin=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i;return __generator(this,function(n){switch(n.label){case 0:return e=t.result_free,o=e.results[0],i=o.round_win,this.winNum+=i,this.model.lave--,this.button.shineSpin(),[4,this.spin(o,i,!0)];case 1:return n.sent(),e.is_end?(this.nowMode="normal",[4,this.win.showWin(e.free_win,this.model.totalBet,!0)]):[3,3];case 2:return n.sent(),this.model.balance=t.now_balance,this.background.transform(0),this.button.hideAll(!1),this.button.freeLave(!1),this.endRound(),v.AudioBox.play_music(this.musicNG,1),[2];case 3:return this.model.fgSpin(),[2]}})})},e.prototype.spin=function(t,e,o){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(n){return[2,new Promise(function(n,r){return __awaiter(i,void 0,void 0,function(){var i;return __generator(this,function(r){switch(r.label){case 0:return this.button.setBtn(!1,!0),[4,this.slot.rollData(t.roll,o)];case 1:return r.sent(),o?o&&0!==t.round_win&&this.background.popMulti():this.setAbility(!1),this.button.setBtn(!0,!1),i=!o&&null,[4,Promise.all([this.win.showWin(e,this.model.totalBet,i),this.slot.showAllLine(t)])];case 2:return r.sent(),this.word.setText(a.wordEnum.win,d.strip(this.winNum)),this.canSpin=!0,this.model.isAuto||this.button.setBtn(!0,!0),n(),[2]}})})})]})})},e.prototype.stop=function(){this.button.setBtn(!0,!1),this.slot.stopRoll()},e.prototype.endRound=function(t){return void 0===t&&(t=function(){}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.model.nextCareer.archery?(this.button.hideAll(!0),[4,this.map.showAlert()]):[3,4];case 1:return e.sent(),[4,d.timeout(.2)];case 2:return e.sent(),[4,this.eyecatch.archeryTransform()];case 3:return e.sent(),this.model.nextCareer.archery=!1,this.model.archeryYear.splice(0,1),this.gameMaster.loading.showTransLoading(),this.gameMaster.loading.loading(p.scene.archery),[2];case 4:return this.info.canShow=!0,this.button.spinBlock(!this.model.isAuto&&!this.button.super),this.model.checkGameOver(),t(),this.model.isAuto&&this.autoSpin(),this.button.super&&this.preSpin(!0),[2]}})})},__decorate([w({type:cc.AudioClip})],e.prototype,"musicNG",void 0),__decorate([w({type:cc.Prefab})],e.prototype,"gameMasterPrefab",void 0),e=__decorate([S],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../Components/Background/background":"background","../Components/Background/map":"map","../Components/Background/people":"people","../Components/Eyecatch/Eyecatch":"Eyecatch","../Components/Setting/setting":"setting","../Components/Slot/slot":"slot","../Components/Symbol/Symbol":"Symbol","../Components/UI/button":"button","../Components/UI/info":"info","../Components/UI/word":"word","../Components/Win/win":"win","./game_master":"game_master","./lib/AudioBox":"AudioBox","./lib/function":"function","./loading":"loading","./model":"model","./translator":"translator"}],map:[function(t,e,o){"use strict";cc._RF.push(e,"96295M1gh1KuYCZA5KjG2rz","map"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/AudioBox"),n=cc._decorator,r=n.ccclass,s=n.property,c=["toSpring","toSummer","toFall","toWinter"],a=["spring_fx","summer_fx","fall_fx","winter_fx"],l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alertSound=null,e.moveSound=null,e.map=null,e.effect=null,e.season=null,e.seasonFx=null,e.character=null,e.milestones=null,e.stoneSprites=[],e.alertSprite=null,e.glowSprite=null,e.currentStone=null,e.firstYear=1555,e.nowYear=1555,e.nowSeason=4,e.isInit=!1,e}return __extends(e,t),e.prototype.progress=function(t,e){var o=t[0],i=t[1];if(!this.isInit)return this.init(o,i),this.setArchery(e),void(this.isInit=!0);o!==this.nowYear&&this.move(o),i!==this.nowSeason&&this.changeSeason(i,!1),e.indexOf(o)>-1&&this.setGlow(o)},e.prototype.setArchery=function(t){for(var e=this.milestones.children,o=0,i=t.length;o<i;o++)if(!(t[o]<this.nowYear)){var n=t[o]-this.firstYear,r=new cc.Node(""+t[o]);r.addComponent(cc.Sprite).spriteFrame=this.alertSprite,r.y=e[n].y,r.x=e[n].x,this.effect.addChild(r),r.y+=30,r.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,10)).easing(cc.easeCircleActionIn()),cc.moveBy(.5,cc.v2(0,-10)).easing(cc.easeCircleActionOut())).repeatForever())}t.indexOf(this.nowYear)>-1&&this.setGlow(this.nowYear)},e.prototype.setGlow=function(t){var e=t-this.firstYear,o=this.milestones.children[e],i=this.effect.getChildByName(""+t);i.x=-2+o.x,i.y=17+o.y,i.getComponent(cc.Sprite).spriteFrame=this.glowSprite,i.stopAllActions(),i.opacity=0,i.runAction(cc.sequence(cc.fadeTo(.5,255),cc.callFunc(function(){i.runAction(cc.sequence(cc.fadeTo(1,170),cc.fadeTo(1,255)).repeatForever())})))},e.prototype.showAlert=function(){var t=this;return new Promise(function(e,o){var n=t.nowYear-t.firstYear,r=t.milestones.children[n],s=t.effect.getChildByName(""+t.nowYear);s?(i.AudioBox.play_sound(t.alertSound,1),s.x=30+r.x,s.y=65+r.y,s.scaleY=0,s.opacity=255,s.rotation=15,s.anchorY=.2,s.getComponent(cc.Sprite).spriteFrame=t.alertSprite,s.stopAllActions(),s.runAction(cc.sequence(cc.scaleTo(.1,1,0),cc.scaleTo(.1,1,1.1),cc.scaleTo(.1,1,.9),cc.scaleTo(.1,1,1),cc.callFunc(function(){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return[2,e()]})})})))):e()})},e.prototype.runAll=function(){var t=this,e=this.firstYear+1;this.schedule(function(){t.move(e),e+=e===t.firstYear+43?0:1},1)},e.prototype.init=function(t,e){for(var o=this.milestones.children,i=o[0],n=t-this.firstYear,r=0,s=n;r<s;r++)o[r].getComponent(cc.Sprite).spriteFrame=this.stoneSprites[0];this.currentStone=o[n],this.currentStone.getComponent(cc.Sprite).spriteFrame=this.stoneSprites[1],this.map.x-=this.currentStone.x-i.x,this.map.y-=this.currentStone.y-i.y,this.changeSeason(e,!0),this.nowYear=t},e.prototype.changeSeason=function(t,e){var o=this,i=this.season.getComponent(cc.Animation),n=e?3:0;i.play(c[t-1],n),setTimeout(function(){return o.seasonFx.getComponent(cc.Animation).play(a[t-1])},1e3),this.nowSeason=t},e.prototype.move=function(t){var e=t-this.firstYear,o=this.milestones.children,n=this.currentStone,r=o[e],s=(o[e+1],r.x-n.x),c=r.y-n.y;n.getComponent(cc.Sprite).spriteFrame=this.stoneSprites[0],r.getComponent(cc.Sprite).spriteFrame=this.stoneSprites[1],this.map.runAction(cc.moveBy(1,cc.p(-s,-c)).easing(cc.easeCubicActionOut())),this.currentStone=r,this.nowYear=t,i.AudioBox.play_sound(this.moveSound,1)},__decorate([s({type:cc.AudioClip})],e.prototype,"alertSound",void 0),__decorate([s({type:cc.AudioClip})],e.prototype,"moveSound",void 0),__decorate([s(cc.Node)],e.prototype,"map",void 0),__decorate([s(cc.Node)],e.prototype,"effect",void 0),__decorate([s(cc.Node)],e.prototype,"season",void 0),__decorate([s(cc.Node)],e.prototype,"seasonFx",void 0),__decorate([s(cc.Node)],e.prototype,"character",void 0),__decorate([s(cc.Node)],e.prototype,"milestones",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"stoneSprites",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"alertSprite",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"glowSprite",void 0),e=__decorate([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox"}],modal:[function(t,e,o){"use strict";cc._RF.push(e,"3b5dfcJiQpMtJggshpZmNku","modal"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/loading"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockTouch=null,e.describe=null,e.yesOnlyBtn=null,e.yesBtn=null,e.noBtn=null,e.yesLabel=null,e.noLabel=null,e.confirmLabel=null,e}return __extends(e,t),e.prototype.init=function(){var t=this;this.node.active=!1,this.blockTouch.on(cc.Node.EventType.TOUCH_START,function(){return t.defaultFn()}),this.yesLabel.string=i.FontAsset.text.yes,this.noLabel.string=i.FontAsset.text.no,this.confirmLabel.string=i.FontAsset.text.confirm},e.prototype.yesOnlyModal=function(t,e){var o=this;void 0===e&&(e=this.defaultFn),this.setModal(t,!0),this.yesOnlyBtn.once(cc.Node.EventType.TOUCH_START,function(){return o.afterClick(e)})},e.prototype.normalModal=function(t,e,o){var i=this;void 0===e&&(e=this.defaultFn),void 0===o&&(o=this.defaultFn),this.setModal(t,!1),this.yesBtn.once(cc.Node.EventType.TOUCH_START,function(){return i.afterClick(e)}),this.noBtn.once(cc.Node.EventType.TOUCH_START,function(){return i.afterClick(o)})},e.prototype.setModal=function(t,e){this.node.active=!0,this.yesOnlyBtn.active=e,this.yesBtn.active=!e,this.noBtn.active=!e,this.describe.string=t},e.prototype.defaultFn=function(){},e.prototype.afterClick=function(t){t(),this.node.active=!1},__decorate([s(cc.Node)],e.prototype,"blockTouch",void 0),__decorate([s(cc.Label)],e.prototype,"describe",void 0),__decorate([s(cc.Node)],e.prototype,"yesOnlyBtn",void 0),__decorate([s(cc.Node)],e.prototype,"yesBtn",void 0),__decorate([s(cc.Node)],e.prototype,"noBtn",void 0),__decorate([s(cc.Label)],e.prototype,"yesLabel",void 0),__decorate([s(cc.Label)],e.prototype,"noLabel",void 0),__decorate([s(cc.Label)],e.prototype,"confirmLabel",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Script/loading":"loading"}],model:[function(t,e,o){"use strict";cc._RF.push(e,"f59fcVCW+BE0qF62nVazaGg","model"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=t("./ws"),r=t("./debug"),s=t("./game_master"),c=t("./config"),a=t("./loading"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameMaster=null,e.modal=null,e.ws=new n.WS,e.debug=new r.Debug,e.gameOver=!1,e.bet=0,e.line=20,e.isAuto=!1,e.isTurbo=!1,e.autoIdx=0,e._autoSetting=c.autoTimes[0],e._autoTimes=c.autoTimes[0],e._lave=0,e.archeryYear=[],e.dropCount=0,e.event=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"autoSetting",{get:function(){return this._autoSetting},set:function(t){this._autoSetting=t,this.resumeAuto()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lave",{get:function(){return this._lave},set:function(t){this._lave=t,this.node.emit(i.setLave,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTimes",{get:function(){return this._autoTimes},set:function(t){this._autoTimes=t,this.node.emit(i.setAuto,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"balance",{get:function(){return this.player.balance},set:function(t){this.player.balance=t,this.node.emit(i.balance)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalBet",{get:function(){return this.player.bet_steps[this.bet]*this.line},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"class",{get:function(){return this.career.class},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wife",{get:function(){return this.career.wife},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.career=this.clearCareer,this.nextCareer=this.clearCareer,this.archeryYear=this.player.archery_years.slice(0),this.gameMaster.loading.reloadMain()},e.prototype.checkGameOver=function(){this.gameOver&&(this.resumeAuto(),this.isAuto=!1,this.gameOver=!1,this.node.emit(i.gameover))},e.prototype.resumeAuto=function(){this.autoTimes=this.autoSetting},e.prototype.init=function(){this.gameMaster=this.node.getComponent(s.default),this.modal=this.gameMaster.modal,this.resumeAuto(),this.linkWs()},e.prototype.initMain=function(){this.node.emit(i.totalBet),this.node.emit(i.balance),this.node.emit(i.career,this.careerEvent(!0,!this.nextCareer.archery))},e.prototype.linkWs=function(){var t=this;if(c.isDebug)return this.debug.on(n.WSEvent.onmessage,function(e){return t.onMessage(e)}),void this.debug.init();this.ws.connect(),this.ws.on(n.WSEvent.onmessage,function(e){return t.onMessage(e)}),this.ws.on(n.WSEvent.onerror,function(t){return console.error(t)}),this.ws.on(n.WSEvent.onclose,function(e){return t.modal.yesOnlyModal(a.FontAsset.text.disconnectMsg,t.reConnect)})},e.prototype.onMessage=function(t){try{var e=(t=JSON.parse(t.detail))[0],o=t[1],n=t[2];if(411===o&&(this.balance=n.game.now_balance),0!==o)return this.modal.yesOnlyModal(a.FontAsset.text.errorCode[o]),void this.node.emit(i.resumeBtn);switch(e){case 100:case 110:this.player=n.player,this.balance=this.player.balance,this.archeryYear=this.player.archery_years.slice(0),this.node.emit(i.totalBet);break;case 210:this.career=n.career,this.nextCareer=n.career,this.node.emit(i.career,this.careerEvent(!1,!0));break;case 220:this.clearCareer=n.career,this.gameOver=!0;break;case 310:this.node.emit(i.ng,n.game);break;case 312:this.node.emit(i.roll),this.balance=n.game.now_balance,this.nextCareer=n.career,this.node.emit(i.career,this.careerEvent(!1,!0));break;case 320:this.node.emit(i.roll),this.node.emit(i.fg,n.game);break;case 330:this.node.emit(i.bg,n.game);break;case 332:this.node.emit(i.ac,n.game_ac);break;case 987:var r=n.other.new_bd_money,s={new_bd_money:r,change:r-this.career.abilities[0],event:this.event};this.career.abilities[0]=r,this.nextCareer.abilities[0]=r,this.node.emit(i.updMoney,s)}}catch(t){console.error(t),this.modal.yesOnlyModal(a.FontAsset.text.disconnectMsg,this.reConnect)}},e.prototype.careerEvent=function(t,e){var o=this.career,i=this.nextCareer,n={isInit:t,isWedding:!1,isUpgrade:!1,career:e?i:o};return t?n:(n.isWedding=o.wife!==i.wife&&!1===o.wife,n.isUpgrade=o.class!==i.class,n)},e.prototype.reConnect=function(){location.reload()},e.prototype.getPlayer=function(){this.ws.send(110)},e.prototype.getCareer=function(){this.ws.send(210)},e.prototype.ngSpin=function(){if(c.isDebug)this.debug.ng();else{var t=this.player.bet_steps[this.bet];this.ws.send(310,{bets:{bet:t,line:this.line}})}},e.prototype.fgSpin=function(){c.isDebug?this.debug.fg():this.ws.send(320)},e.prototype.bgSpin=function(){c.isDebug?this.debug.bg():this.ws.send(330)},e.prototype.archerySpin=function(){c.isDebug?this.debug.ac():this.ws.send(332)},e.prototype.dropMoney=function(t){this.dropCount++,this.dropCount<10||(this.dropCount=0,this.event=t,c.isDebug?this.debug.dropMoney():this.ws.send(987))},e=__decorate([u],e)}(cc.Component));o.default=d,function(t){t.roll="roll",t.balance="balance",t.totalBet="totalBet",t.career="carerr",t.gameover="gameover",t.ng="ng",t.fg="fg",t.bg="bg",t.ac="ac",t.resumeBtn="resumeBtn",t.setAuto="setAuto",t.setLave="setLave",t.updMoney="updMoney"}(i=o.modelEvent||(o.modelEvent={})),cc._RF.pop()},{"./config":"config","./debug":"debug","./game_master":"game_master","./loading":"loading","./ws":"ws"}],people:[function(t,e,o){"use strict";cc._RF.push(e,"5e3dcyBU8RDybnE429OY093","people"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/AudioBox"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leadingSprites=[],e.leading=null,e.wife=null,e.hitSound=null,e.lvUpSound=null,e.touchEvent=cc.Node.EventType.TOUCH_START,e.model=null,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.model=t;var o=this.leading.getChildByName("touch"),i=this.wife.getChildByName("touch");o.on(this.touchEvent,function(t){return e.shake(e.leading,t)}),i.on(this.touchEvent,function(t){return e.shake(e.wife,t)})},e.prototype.shake=function(t,e){t.getComponent(cc.Animation).play(),this.model.dropMoney(e),i.AudioBox.play_sound(this.hitSound,1)},e.prototype.change=function(t,e){this.leading.getComponent(cc.Sprite).spriteFrame=this.leadingSprites[t],this.wife.active=e},e.prototype.playLvUpSound=function(){i.AudioBox.play_sound(this.lvUpSound,1)},__decorate([s({type:[cc.SpriteFrame]})],e.prototype,"leadingSprites",void 0),__decorate([s({type:cc.Node})],e.prototype,"leading",void 0),__decorate([s({type:cc.Node})],e.prototype,"wife",void 0),__decorate([s({type:cc.AudioClip})],e.prototype,"hitSound",void 0),__decorate([s({type:cc.AudioClip})],e.prototype,"lvUpSound",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox"}],playSound:[function(t,e,o){"use strict";cc._RF.push(e,"a151c5F28BFjJR2Y9s1BVse","playSound"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../lib/AudioBox"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){return i.AudioBox.play_sound(t.sound,1)})},__decorate([s({type:cc.AudioClip})],e.prototype,"sound",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../lib/AudioBox":"AudioBox"}],randomPlay:[function(t,e,o){"use strict";cc._RF.push(e,"ad271o3HyJBg4TBVCR5XPJe","randomPlay"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../lib/function"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.xRange=[0,0],e.yRange=[0,0],e.timeRange=[0,0],e.animate=null,e.originPos=[0,0],e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.originPos=[this.node.x,this.node.y],this.animate=this.node.getComponent(cc.Animation),setTimeout(function(){return t.randomPlay()},i.random(this.timeRange[0],this.timeRange[1]))},e.prototype.randomPlay=function(){var t=this;this.node.x=this.originPos[0]+i.random(this.xRange[0],this.xRange[1]),this.node.y=this.originPos[1]+i.random(this.yRange[0],this.yRange[1]),this.animate.play().wrapMode=cc.WrapMode.Normal,this.animate.once("finished",function(){return setTimeout(function(){return t.randomPlay()},i.random(t.timeRange[0],t.timeRange[1]))})},__decorate([s({type:[cc.Integer]})],e.prototype,"xRange",void 0),__decorate([s({type:[cc.Integer]})],e.prototype,"yRange",void 0),__decorate([s({type:[cc.Integer]})],e.prototype,"timeRange",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../lib/function":"function"}],setting:[function(t,e,o){"use strict";cc._RF.push(e,"7308ebSZ1xEJ5fBfcc4mbxJ","setting"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/config"),n=t("../../Script/lib/AudioBox"),r=cc._decorator,s=r.ccclass,c=r.property,a=cc.color(247,189,40,255),l=cc.color(151,155,162,255),u=cc.color(49,49,49,255),d=cc.color(226,226,226,255),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextSound=null,e.backSound=null,e.settingBtn=null,e.ruleBtn=null,e.closeBtn=null,e.musicBtn=null,e.soundBtn=null,e.autoBtn=[],e.settingPage=null,e.rulePage=null,e.toggleOpenSprite=null,e.toggleCloseSprite=null,e.autoOpenSprite=null,e.autoCloseSprite=null,e.payout=[],e.model=null,e.touceEvent=cc.Node.EventType.TOUCH_START,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.node.on(this.touceEvent,function(){}),this.node.active=!1,this.model=t,this.settingBtn.getChildByName("touch").on(this.touceEvent,function(){return e.changePage(1)},this),this.ruleBtn.getChildByName("touch").on(this.touceEvent,function(){return e.changePage(0)},this),this.closeBtn.on(this.touceEvent,function(){return e.close()},this),this.musicBtn.on(this.touceEvent,function(){return e.musicToggle()},this),this.soundBtn.on(this.touceEvent,function(){return e.soundToggle()},this),this.toggle(this.musicBtn,n.AudioBox.music_switch),this.toggle(this.soundBtn,n.AudioBox.sound_switch);for(var o=function(t,o){r.autoBtn[t].on(r.touceEvent,function(){return e.auto(t)},r),r.autoBtn[t].getChildByName("times").getComponent(cc.Label).string=""+i.autoTimes[t]},r=this,s=0,c=this.autoBtn.length;s<c;s++)o(s);var a=t.player.wintable;for(s=0,c=a.length;s<c;s++)for(var l=a[s],u=0,d=l.length;u<d;u++)0!==l[u]&&(this.payout[5*s+u].string=""+l[u]);this.auto(this.model.autoIdx,!1)},e.prototype.close=function(){this.node.active=!1,n.AudioBox.play_sound(this.backSound,1)},e.prototype.open=function(){this.node.active=!0,this.changePage(1)},e.prototype.changePage=function(t){this.settingPage.active=!!t,this.rulePage.active=!t,this.settingBtn.color=t?a:l,this.ruleBtn.color=t?l:a,n.AudioBox.play_sound(this.nextSound,1)},e.prototype.musicToggle=function(){n.AudioBox.music_switch=!n.AudioBox.music_switch,this.toggle(this.musicBtn,n.AudioBox.music_switch);var t=n.AudioBox.music_switch?this.nextSound:this.backSound;n.AudioBox.play_sound(t,1)},e.prototype.soundToggle=function(){n.AudioBox.sound_switch=!n.AudioBox.sound_switch,this.toggle(this.soundBtn,n.AudioBox.sound_switch);var t=n.AudioBox.sound_switch?this.nextSound:this.backSound;n.AudioBox.play_sound(t,1)},e.prototype.toggle=function(t,e){t.getComponent(cc.Sprite).spriteFrame=e?this.toggleOpenSprite:this.toggleCloseSprite},e.prototype.auto=function(t,e){void 0===e&&(e=!0);for(var o=0,r=this.autoBtn.length;o<r;o++){var s=this.autoBtn[o],c=s.getChildByName("times");s.getComponent(cc.Sprite).spriteFrame=o===t?this.autoOpenSprite:this.autoCloseSprite,c.color=o===t?u:d}e&&(this.model.autoSetting=i.autoTimes[t],n.AudioBox.play_sound(this.nextSound,1)),this.model.autoIdx=t},__decorate([c({type:cc.AudioClip})],e.prototype,"nextSound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"backSound",void 0),__decorate([c({type:cc.Node})],e.prototype,"settingBtn",void 0),__decorate([c({type:cc.Node})],e.prototype,"ruleBtn",void 0),__decorate([c({type:cc.Node})],e.prototype,"closeBtn",void 0),__decorate([c({type:cc.Node})],e.prototype,"musicBtn",void 0),__decorate([c({type:cc.Node})],e.prototype,"soundBtn",void 0),__decorate([c({type:[cc.Node]})],e.prototype,"autoBtn",void 0),__decorate([c({type:cc.Node})],e.prototype,"settingPage",void 0),__decorate([c({type:cc.Node})],e.prototype,"rulePage",void 0),__decorate([c({type:cc.SpriteFrame})],e.prototype,"toggleOpenSprite",void 0),__decorate([c({type:cc.SpriteFrame})],e.prototype,"toggleCloseSprite",void 0),__decorate([c({type:cc.SpriteFrame})],e.prototype,"autoOpenSprite",void 0),__decorate([c({type:cc.SpriteFrame})],e.prototype,"autoCloseSprite",void 0),__decorate([c({type:[cc.Label]})],e.prototype,"payout",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Script/config":"config","../../Script/lib/AudioBox":"AudioBox"}],slot_line:[function(t,e,o){"use strict";cc._RF.push(e,"c43a6I2we5MMZCHFbdXqMi4","slot_line"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/function"),n=t("../../Script/lib/AudioBox"),r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.symbolSound=null,e.symbolFGSound=null,e.symbolBGSound=null,e.lineFrame=null,e.lineWin=null,e.lineWinLabel=null,e.symbols=[],e.symbolScripts=[],e.stopSingle=!1,e}return __extends(e,t),e.prototype.init=function(t,e){for(var o=0,i=t.length;o<i;o++)for(var n=0;n<3;n++)this.symbols.push(t[o][n]),this.symbolScripts.push(e[o][n]),this.lineWin.active=!1},e.prototype.showAllLine=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(o){switch(o.label){case 0:return e=this.getAllActiveGrids(t),[4,this.showLine(e)];case 1:return o.sent(),this.clear(),this.node.emit("showAllEnd"),[2]}})})},e.prototype.loopSingleLine=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:this.stopSingle=!1,e.label=1;case 1:return this.stopSingle?[3,3]:[4,this.showSingleLine(t)];case 2:return e.sent(),[3,1];case 3:return[2]}})})},e.prototype.showSingleLine=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i;return __generator(this,function(n){switch(n.label){case 0:e=this.getActiveGrids(t),o=0,i=e.length,n.label=1;case 1:return o<i?this.stopSingle?[3,4]:(this.clear(),this.showLineWin(t.awards[o].win,e[o]),[4,this.showLine(e[o])]):[3,4];case 2:n.sent(),n.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.showSpecialLine=function(t,e){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return o=this.getSpecialActiveGrids(t,e),[4,this.showLine(o,e)];case 1:return i.sent(),this.clear(),this.node.emit("showSpecialEnd"),[2]}})})},e.prototype.showLineWin=function(t,e){for(var o=0;o<3;o++)if(-1!==e[o]){var n=this.symbols[o];this.lineWin.x=n.x,this.lineWin.y=n.y,this.lineWin.active=!0,this.lineWinLabel.string=""+i.strip(t)}},e.prototype.showLine=function(t,e){var o=this;return new Promise(function(i,r){var s=0;if(t.filter(function(t){return-1===t}).length!==t.length){var c=null;c=e?"bonus"===e?o.symbolBGSound:o.symbolFGSound:o.symbolSound,n.AudioBox.play_sound(c,1);for(var a=0,l=t.length;a<l;a++){var u=o.symbolScripts[a];if(-1!==t[a]){var d=o.lineFrame.children[a];d.active=!0,d.getComponent(cc.Animation).play();var p=u.playAnimation();s=s>p?s:p}else u.setColor(!0)}setTimeout(function(){return i()},1e3*s)}else i()})},e.prototype.clear=function(){this.lineWin.active=!1;for(var t=0,e=this.symbols.length;t<e;t++)this.lineFrame.children[t].active=!1,this.symbolScripts[t].setColor(!1),this.symbolScripts[t].stopAnimation()},e.prototype.getActiveGrids=function(t){for(var e=[],o=[],i=t.roll,n=t.awards,r=0,s=15;r<s;r++)e[r]=-1;for(r=0,s=n.length;r<s;r++){for(var c=n[r].grid,a=e.slice(0),l=0,u=c.length;l<u;l++)a[c[l]]=i[c[l]];o.push(a)}return o},e.prototype.getAllActiveGrids=function(t){for(var e=[],o=t.roll,i=t.awards,n=0,r=15;n<r;n++)e[n]=-1;for(n=0,r=i.length;n<r;n++)for(var s=i[n].grid,c=0,a=s.length;c<a;c++)e[s[c]]=o[s[c]];return e},e.prototype.getSpecialActiveGrids=function(t,e){for(var o=[],i="bonus"===e?11:10,n=t.roll,r=0,s=n.length;r<s;r++)o[r]=n[r]===i?i:-1;return o},__decorate([c({type:cc.AudioClip})],e.prototype,"symbolSound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"symbolFGSound",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"symbolBGSound",void 0),__decorate([c({type:cc.Node})],e.prototype,"lineFrame",void 0),__decorate([c({type:cc.Node})],e.prototype,"lineWin",void 0),__decorate([c({type:cc.Label})],e.prototype,"lineWinLabel",void 0),e=__decorate([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function"}],slot_roll:[function(t,e,o){"use strict";cc._RF.push(e,"e0066I6K0xMl6E3nl0BlPUO","slot_roll"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/config"),n=t("../../Script/lib/function"),r=t("../../Script/lib/AudioBox"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinSound=null,e.scrollSound=null,e.stopSound=null,e.miSound=null,e.miStopSound=null,e.miBg=null,e.miParticle=null,e.isRolling=!1,e.reelState=[0,0,0,0,0],e.reelSpeed=[0,0,0,0,0],e.accel=0,e.maxSpeed=0,e.turns=[],e.symbols=[],e.symbolScripts=[],e.bottom=0,e.distance=0,e.yPos=[],e.rollData=[],e.isFree=!1,e.isMi=!1,e.stopSoundFlag=!1,e.miLock=[!1,!1],e.miSoundId=null,e}return __extends(e,t),e.prototype.update=function(){if(this.isRolling)for(var t=0,e=this.reelState.length;t<e;t++)switch(this.reelState[t]){case 1:this.spinPhysic(t);break;case 2:this.stopPhysic(t)}},e.prototype.init=function(t,e){this.miBg.active=!1,this.miParticle.active=!1,this.symbols=t,this.symbolScripts=e,this.bottom=t[0][0].y,this.distance=Math.abs(t[0][0].y-t[0][1].y);for(var o=0,i=t[0].length;o<i;o++)this.yPos[o]=t[0][o].y},e.prototype.roll=function(t){var e=this;if(!this.isRolling){this.isRolling=!0,this.accel=t?i.turboConfig.turboAcc:i.normalConfig.normalAcc,this.maxSpeed=t?i.turboConfig.turboMax:i.normalConfig.normalMax,this.turns=t?i.turboConfig.turboTurns.slice(0):i.normalConfig.normalTurns.slice(0);for(var o=function(t,o){for(var i=0,r=n.symbols[t].length;i<r;i++)n.symbols[t][i].runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,10)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){return e.reelState[t]=1},n)))},n=this,s=0,c=this.symbols.length;s<c;s++)o(s);r.AudioBox.play_sound(this.spinSound,1),r.AudioBox.play_sound(this.scrollSound,1)}},e.prototype.stop=function(){if(this.isRolling){for(var t=0,e=this.reelState.length;t<e;t++)2!==this.reelState[t]&&this.turns[t]>0&&(this.turns[t]=2);this.stopSoundFlag=!0}},e.prototype.checkMi=function(t){for(var e=0,o=0;o<6;o++)e+=10===t[o]?1:0;o=2;for(var i=this.turns.length;o<i;o++)this.turns[o]+=e>=2?15:0;this.isMi=e>=2,this.miLock=[!0,!0]},e.prototype.activeMi=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(i){for(this.miBg.active=t,this.miParticle.active=t,this.node.emit(t?"miStart":"miEnd"),this.miLock[t?0:1]=!1,e=0,o=6;e<o;e++)10===this.rollData[e]&&this.symbolScripts[Math.floor(e/3)][e%3].miEffect(t);return[2]})})},e.prototype.spinPhysic=function(t){this.reelSpeed[t]=this.reelSpeed[t]>=this.maxSpeed?this.maxSpeed:this.reelSpeed[t]+this.accel;for(var e=this.symbols[t],o=this.reelSpeed[t],s=0,c=e.length;s<c;s++){var a=e[s],l=a.y-o,u=l<=this.bottom-this.distance;if(a.y=u?l+this.distance*c:l,u){var d=this.rollData.length&&s===e.length-1,p=this.isMi&&2===t&&3===s;d&&(this.turns[t]--,this.reelState[t]=this.turns[t]<=0?2:1),p&&0===this.turns[1]&&!0===this.miLock[0]&&(this.activeMi(!0),this.miSoundId=r.AudioBox.play_sound(this.miSound,1)),p&&0===this.turns[2]&&!0===this.miLock[1]&&(this.activeMi(!1),r.AudioBox.stop_sound(this.miSoundId),r.AudioBox.play_sound(this.miStopSound,1));var h=this.turns[t]<=1&&s<3,m=this.turns[t]>1,y=(this.isFree?i.freeRoll:i.normalRoll)[t],f=p?10:n.random(0,y.length-1),_=h?this.rollData[3*t+s]:y[f];this.symbolScripts[t][s].setSprite(_,m)}}},e.prototype.stopPhysic=function(t){var e=this,o=this.symbols[t],i=o[0];if(i.y>=1-this.distance&&i.y<-this.distance+this.reelSpeed[t]+1)this.spinPhysic(t);else{this.reelState[t]=0;for(var n=0,s=o.length;n<s;n++){var c=o[n];c.y=this.yPos[n],c.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,-45)).easing(cc.easeCubicActionOut()),cc.moveBy(.4,cc.v2(0,45)).easing(cc.easeBounceOut()),cc.callFunc(function(){4===t&&e.checkStop()},this)))}this.stopSoundFlag?4===t&&r.AudioBox.play_sound(this.stopSound,1):r.AudioBox.play_sound(this.stopSound,1)}},e.prototype.checkStop=function(){if(this.isRolling){for(var t=!0,e=0,o=this.reelState.length;e<o;e++)0!==this.reelState[e]&&(t=!1);t&&(this.isRolling=!1,this.stopSoundFlag=!1,this.reelSpeed=[0,0,0,0,0],this.rollData=[],this.node.emit("stop"))}},__decorate([a({type:cc.AudioClip})],e.prototype,"spinSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"scrollSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"stopSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"miSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"miStopSound",void 0),__decorate([a({type:cc.Node})],e.prototype,"miBg",void 0),__decorate([a({type:cc.Node})],e.prototype,"miParticle",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Script/config":"config","../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function"}],slot:[function(t,e,o){"use strict";cc._RF.push(e,"5073ceLjPFCbYF35zJDg784","slot"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./slot_roll"),n=t("./slot_line"),r=t("../Symbol/Symbol"),s=t("../../Script/lib/function"),c=t("../../Script/config"),a=t("../../Script/lib/fakeData"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slot=null,e.initXPos=0,e.initYPos=0,e.xDistance=0,e.yDistance=0,e.symbol=null,e.symbols=[],e.symbolScripts=[],e.slotRoll=null,e.slotLine=null,e}return __extends(e,t),e.prototype.init=function(){this.createSlot(),this.slotRoll=this.node.getComponent(i.default),this.slotLine=this.node.getComponent(n.default),this.slotRoll.init(this.symbols,this.symbolScripts),this.slotLine.init(this.symbols,this.symbolScripts)},e.prototype.clearLine=function(){this.slotLine.stopSingle=!0,this.slotLine.clear()},e.prototype.roll=function(t){this.clearLine(),this.slotRoll.roll(t)},e.prototype.rollData=function(t,e){var o=this;return new Promise(function(i,n){o.slotRoll.rollData=t,o.slotRoll.checkMi(t),o.slotRoll.isFree=e,o.node.once("stop",function(){return i()})})},e.prototype.stopRoll=function(){this.slotRoll.stop()},e.prototype.showAllLine=function(t){var e=this;return new Promise(function(o,i){e.slotLine.showAllLine(t),e.node.once("showAllEnd",function(){return o()})})},e.prototype.loopSingleLine=function(t){this.slotLine.loopSingleLine(t)},e.prototype.showSpecialLine=function(t,e){var o=this;return new Promise(function(i,n){o.slotLine.showSpecialLine(t,e),o.node.once("showSpecialEnd",function(){return i()})})},e.prototype.createSlot=function(){for(var t=a.fake[s.random(0,a.fake.length-1)],e=0;e<5;e++){for(var o=this.initXPos+this.xDistance*e,i=[],n=[],l=c.normalRoll[e],u=0;u<4;u++){var d=u>=3?l[s.random(0,l.length-1)]:t[3*e+u],p=u>=3?10:0,h=cc.instantiate(this.symbol),m=h.getComponent(r.default);m.init(),m.setSprite(d,!1),h.x=o,h.y=this.initYPos+this.yDistance*u+p,this.slot.addChild(h),i.push(h),n.push(m)}this.symbols[e]=i,this.symbolScripts[e]=n}},__decorate([d({tooltip:"\u6efe\u8f2a\u7bc0\u9ede",type:cc.Node})],e.prototype,"slot",void 0),__decorate([d({tooltip:"\u5de6\u4e0bX\u5ea7\u6a19",type:cc.Integer})],e.prototype,"initXPos",void 0),__decorate([d({tooltip:"\u5de6\u4e0bY\u5ea7\u6a19",type:cc.Integer})],e.prototype,"initYPos",void 0),__decorate([d({tooltip:"x\u9593\u8ddd",type:cc.Integer})],e.prototype,"xDistance",void 0),__decorate([d({tooltip:"y\u9593\u8ddd",type:cc.Integer})],e.prototype,"yDistance",void 0),__decorate([d({type:cc.Prefab})],e.prototype,"symbol",void 0),e=__decorate([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Script/config":"config","../../Script/lib/fakeData":"fakeData","../../Script/lib/function":"function","../Symbol/Symbol":"Symbol","./slot_line":"slot_line","./slot_roll":"slot_roll"}],soundEvent:[function(t,e,o){"use strict";cc._RF.push(e,"dd94babOClN1q/I7MhoxWXX","soundEvent"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../lib/AudioBox"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundClip=[],e.eventName=[],e.reversePlay=!1,e.animation=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation),this.setEvent()},e.prototype.setEvent=function(){for(var t=this,e=function(e,n){o[o.eventName[e]]=function(){t.animation.getAnimationState(t.animation.currentClip.name).wrapMode===cc.WrapMode.Reverse&&!t.reversePlay||i.AudioBox.play_sound(t.soundClip[e],1,!1)}},o=this,n=0,r=this.eventName.length;n<r;n++)e(n)},__decorate([s({type:[cc.AudioClip]})],e.prototype,"soundClip",void 0),__decorate([s({type:[cc.String]})],e.prototype,"eventName",void 0),__decorate([s],e.prototype,"reversePlay",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../lib/AudioBox":"AudioBox"}],touch:[function(t,e,o){"use strict";cc._RF.push(e,"2ffc1k0TcZEsocDVSKF9hkJ","touch"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,r=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touch=null,e._isSwallow=!1,e}return __extends(e,t),e.prototype.onEnable=function(){var t=this.node;t._touchListener&&t._touchListener.setSwallowTouches(this._isSwallow)},e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){return t.touchEffect(e)},this)},e.prototype.touchEffect=function(t){this.touch.x=t.touch.getLocationX()-360,this.touch.y=t.touch.getLocationY()-640,this.touch.getComponent(cc.Animation).play()},__decorate([r({type:cc.Node})],e.prototype,"touch",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],translator:[function(t,e,o){"use strict";cc._RF.push(e,"18c53Sz3uBAjLd1l3n1guee","translator"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./loading"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labels=[],e}return __extends(e,t),e.prototype.init=function(){for(var t=this.labels,e=0,o=t.length;e<o;e++)i.FontAsset.setText(t[e],t[e].node.name)},__decorate([s({type:[cc.Label]})],e.prototype,"labels",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./loading":"loading"}],win:[function(t,e,o){"use strict";cc._RF.push(e,"19feaRoXRtKAJ37+Di7z6He","win"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Script/lib/function"),n=t("../../Script/config"),r=t("../../Script/lib/AudioBox"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winNumber=null,e.totalWinNumber=null,e.bigWinNumber=null,e.megaWinNumber=null,e.superMegaWinNumber=null,e.winNode=null,e.totalWinNode=null,e.bigWinNode=null,e.megaWinNode=null,e.superMegaWinNode=null,e.bigWinWord=[],e.loopSound=null,e.stopSound=null,e.winSounds=[],e.allNumber=[],e.allNode=[],e.touchEvent=cc.Node.EventType.TOUCH_START,e.loopSoundId=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.allNumber=[this.winNumber,this.totalWinNumber,this.bigWinNumber,this.megaWinNumber,this.superMegaWinNumber],this.allNode=[this.winNode,this.totalWinNode,this.bigWinNode,this.megaWinNode,this.superMegaWinNode],this.reset()},e.prototype.reset=function(){this.allNumber.map(function(t){return t.string="0"}),this.allNode.map(function(t){return t.active=!1})},e.prototype.showWin=function(t,e,o){var n=this;return void 0===o&&(o=null),new Promise(function(s,c){return __awaiter(n,void 0,void 0,function(){var n,c,a,l,u,d,p,h,m,y,f,_,g,v=this;return __generator(this,function(b){return t<=0?(s(),[2]):(n=!1===o||t<i.mul(e,10),this.loopSoundId=r.AudioBox.play_sound(this.loopSound,1,!0),n?(c=this.winNumber,a=t/100+.01,l=0,this.winNode.active=!0,this.winNode.getComponent(cc.Animation).play(),u=setInterval(function(){return __awaiter(v,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return c.string=""+i.strip(l),(l+=a)>=t?(r.AudioBox.play_sound(this.stopSound,1),r.AudioBox.stop_sound(this.loopSoundId),clearInterval(u),c.string=""+i.strip(t),[4,i.timeout(1)]):[3,2];case 1:e.sent(),this.reset(),s(),e.label=2;case 2:return[2]}})})})):(d=!0===o?this.totalWinNode:this.winNode,p=!0===o?this.totalWinNumber:this.winNumber,h=[d,this.bigWinNode,this.megaWinNode,this.superMegaWinNode],m=[p,this.bigWinNumber,this.megaWinNumber,this.superMegaWinNumber],y=r.AudioBox.music_switch,f=0,_=(e/20*4+13)/100,r.AudioBox.music_switch=!1,g=setInterval(function(){var o=v.checkBigWin(f,e,h);m[o].string=""+i.strip(f),(f+=_)>t&&v.node.emit(v.touchEvent)},10),this.node.once(this.touchEvent,function(){return __awaiter(v,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return r.AudioBox.play_sound(this.stopSound,1),r.AudioBox.stop_sound(this.loopSoundId),clearInterval(g),m[this.checkBigWin(t,e,h)].string=""+i.strip(t),[4,i.timeout(2)];case 1:return o.sent(),this.reset(),r.AudioBox.music_switch=y,s(),[2]}})})},this)),[2])})})})},e.prototype.playBigWin=function(t,e){if(0!==t){this.bigWinWord[t].runAction(cc.sequence(cc.scaleTo(.1,1.8,1.8),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,1,1)));for(var o=0,i=t;o<i;o++)e[o].active=!1}e[t].active=!0,e[t].getComponent(cc.Animation).play()},e.prototype.checkBigWin=function(t,e,o){for(var i=t/e,s=0,c=o.length;s<c;s++)if(i<n.winLevel[s])return o[s].active||(r.AudioBox.play_sound(this.winSounds[s],1),this.playBigWin(s,o)),s},__decorate([a({type:cc.Label})],e.prototype,"winNumber",void 0),__decorate([a({type:cc.Label})],e.prototype,"totalWinNumber",void 0),__decorate([a({type:cc.Label})],e.prototype,"bigWinNumber",void 0),__decorate([a({type:cc.Label})],e.prototype,"megaWinNumber",void 0),__decorate([a({type:cc.Label})],e.prototype,"superMegaWinNumber",void 0),__decorate([a({type:cc.Node})],e.prototype,"winNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"totalWinNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"bigWinNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"megaWinNode",void 0),__decorate([a({type:cc.Node})],e.prototype,"superMegaWinNode",void 0),__decorate([a({type:[cc.Node]})],e.prototype,"bigWinWord",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"loopSound",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"stopSound",void 0),__decorate([a({type:[cc.AudioClip]})],e.prototype,"winSounds",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Script/config":"config","../../Script/lib/AudioBox":"AudioBox","../../Script/lib/function":"function"}],word:[function(t,e,o){"use strict";cc._RF.push(e,"ee226xNZWdB8pwzmex+lq5u","word"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=t("../../Script/lib/function"),r=t("../../Script/loading"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.abilityTitle=[],e.roleName=null,e.level=null,e.totalBet=null,e.win=null,e.balance=null,e.year=null,e.money=[],e.ability=[],e.abilityLevel=[],e.abilityBar=[],e.seasonIcon=null,e.seasonSprite=[],e.moneyAni=null,e.abilityWidth=148,e.prevSeason=null,e}return __extends(e,t),e.prototype.init=function(){this.setText(i.win,n.strip(0));for(var t=1;t<5;t++)this.abilityTitle[t-1].string=r.FontAsset.text.ability[t]},e.prototype.setText=function(t,e){this[t].string=e},e.prototype.setTime=function(t,e){var o=t.progress[0],i=t.progress[1];this.year.string=""+o,this.seasonIcon.getComponent(cc.Sprite).spriteFrame=this.seasonSprite[i-1],i===this.prevSeason||e||this.seasonIcon.runAction(cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,1,1))),this.prevSeason=i},e.prototype.setClass=function(t){this.roleName.string=r.FontAsset.text.name[t],this.level.string=r.FontAsset.text.level[t]},e.prototype.setAbility=function(t,e,o,i){var r=t.abilities;this.updMoney(r[0],e[0],i);for(var s=0,c=this.ability.length;s<c;s++){var a=o[s],l=e[s+1],u=n.transAbility(r[s+1]),d=u[0],p=u[1];this.abilityBar[s].width=this.abilityWidth*p,this.ability[s].string=Math.floor(100*p)+"%",this.abilityLevel[s].string="Lv"+d,l>0&&!i&&(this.changeEffect(this.ability[s],"+"+l+"%"),this.abilityBar[s].getComponent(cc.Animation).play()),a>0&&!i&&this.changeEffect(this.abilityLevel[s],"+"+a)}},e.prototype.drop=function(t){var e=this;return new Promise(function(o,i){var n=new cc.Node,r=n.addComponent(cc.Sprite),s=n.addComponent(cc.Animation),c=t.event;r.sizeMode=cc.Sprite.SizeMode.RAW,r.trim=!1,n.x=c.touch.getLocationX()-360,n.y=c.touch.getLocationY()-640,s.addClip(e.moneyAni,"drop"),s.play("drop"),e.node.addChild(n);var a=[cc.p(n.x,160),cc.p(n.x+(320-n.x)/2,160),cc.p(320,85)];n.runAction(cc.sequence(cc.moveTo(.4,new cc.Vec2(n.x,160)).easing(cc.easeIn(3)),cc.fadeIn(.2),cc.bezierTo(.4,a),cc.fadeOut(.1),cc.callFunc(function(){n.destroy(),e.updMoney(t.new_bd_money,t.change)})))})},e.prototype.updMoney=function(t,e,o){void 0===o&&(o=!1);for(var i=n.transMoney(t),r=n.transMoney(e),s=0,c=this.money.length;s<c;s++)this.money[s].string=""+i[s],r[s]>0&&!o&&this.changeEffect(this.money[s],"+"+r[s])},e.prototype.changeEffect=function(t,e){var o=new cc.Node,i=o.addComponent(cc.Label),n=t.node;n.parent.addChild(o),o.getComponent(cc.Label).string=e,o.x=n.x,o.y=n.y,i.fontSize=t.fontSize,n.runAction(cc.sequence(cc.scaleTo(.1,1.5,1.5).easing(cc.easeBackIn()),cc.scaleTo(.1,1,1).easing(cc.easeBackIn()))),o.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,10)).easing(cc.easeBounceOut()),cc.fadeOut(.5),cc.callFunc(function(){return o.destroy()},this)))},__decorate([a({type:[cc.Label]})],e.prototype,"abilityTitle",void 0),__decorate([a(cc.Label)],e.prototype,"roleName",void 0),__decorate([a(cc.Label)],e.prototype,"level",void 0),__decorate([a(cc.Label)],e.prototype,"totalBet",void 0),__decorate([a(cc.Label)],e.prototype,"win",void 0),__decorate([a(cc.Label)],e.prototype,"balance",void 0),__decorate([a(cc.Label)],e.prototype,"year",void 0),__decorate([a([cc.Label])],e.prototype,"money",void 0),__decorate([a({type:[cc.Label]})],e.prototype,"ability",void 0),__decorate([a({type:[cc.Label]})],e.prototype,"abilityLevel",void 0),__decorate([a({type:[cc.Node]})],e.prototype,"abilityBar",void 0),__decorate([a(cc.Node)],e.prototype,"seasonIcon",void 0),__decorate([a({type:[cc.SpriteFrame]})],e.prototype,"seasonSprite",void 0),__decorate([a({type:cc.AnimationClip})],e.prototype,"moneyAni",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,function(t){t.totalBet="totalBet",t.win="win",t.balance="balance"}(i=o.wordEnum||(o.wordEnum={})),cc._RF.pop()},{"../../Script/lib/function":"function","../../Script/loading":"loading"}],ws_data:[function(t,e,o){"use strict";cc._RF.push(e,"95dfe5IxhdKJ4hrRnsGxxNS","ws_data"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ws:[function(t,e,o){"use strict";cc._RF.push(e,"163fdTq6OJGEZor51Ic3ezN","ws"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,r=n.ccclass,s=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.send=function(t,e){void 0===e&&(e={});var o=[t,e];try{this.ws.send(JSON.stringify(o))}catch(t){console.error(t)}},e.prototype.login=function(){var t={gid:i.urlConfig.gid,skey:i.urlConfig.skey,usid:i.urlConfig.usid,currency:i.urlConfig.currency};this.send(100,{login:t})},e.prototype.connect=function(){var t=this,e="https:"===location.protocol?"wss:":"ws:";this.ws=new WebSocket(e+"//"+i.urlConfig.url),this.ws.onopen=function(){return t.login()},this.ws.onmessage=function(e){return t.emit(c.onmessage,e.data)},this.ws.onerror=function(e){return t.emit(c.onerror,e)},this.ws.onclose=function(e){return t.emit(c.onclose,e)}},e=__decorate([r],e)}(cc.EventTarget));o.WS=s;var c=function(){function t(){}return t.onmessage="onmessage",t.onerror="onerror",t.onclose="onclose",t}();o.WSEvent=c,cc._RF.pop()},{"./config":"config"}]},{},["background","map","people","Eyecatch","modal","setting","slot","slot_line","slot_roll","Symbol","touch","button","info","word","win","archery","bonus","config","debug","game_master","AudioBox","fakeData","function","ws_data","loading","main","model","playSound","randomPlay","soundEvent","translator","ws"]);